
% Copyright (c) 2015 - 2021 Mario Mlaƒçak, mmlacak@gmail.com
% Licensed and published as Public Domain work.

% Appendix chapter ----------------------------------------------------
\chapter*{Appendix}
\addcontentsline{toc}{chapter}{Appendix}
\label{ch:Appendix}

Appendix contains description of algebraic notation, extended from the base described here: \\
\href{https://en.wikipedia.org/wiki/Algebraic\_notation\_(chess)}{https://en.wikipedia.org/wiki/Algebraic\_notation\_(chess)}. \\
This description mostly covers short notation, and is written in monospace font, e.g. \alg{Nc3}.

Parts of classic notation clashes with new developments, and so had to be covered with
exceptions made specificaly for Classical Chess, so that algebraic notation retains
compatibility with its classic form. These exceptions are written in monospace italics,
e.g. \algcty{Nxb3}.

For instance, \algcty{0-0}, \algcty{O-O} and their Queen's side siblings for castling had
to go in extended algebraic notation, since there are multiple castling choices available.
Another example, \algcty{x} as annotation for a capturing move, e.g. \algcty{Nxv3}, since
this might also be interpreted as disambiguation.

\clearpage % ..........................................................

\section*{Introduction}
\addcontentsline{toc}{section}{Introduction}
\label{sec:Appendix/Introduction}

\begin{table}[!h]
\centering
\begin{tabular}{ rlll }
\toprule
\textbf{Id} & \textbf{Symbol}      & \textbf{Description}                       \\
\midrule
1           & \algfmt{AN}          & algebraic notation, in general             \\ \cmidrule{1-3}
2           & \algfmt{CAN}         & classic \algfmt{AN}, as described by FIDE  \\
            &                      & handbook and Wikipedia, can be             \\
            &                      & long, short or minimal                     \\
3           & \algfmt{LAN}         & classic \algfmt{AN}, long form             \\
4           & \algfmt{SAN}         & classic \algfmt{AN}, short form            \\
5           & \algfmt{MAN}         & classic \algfmt{AN}, minimal form          \\ \cmidrule{1-3}
6           & \algfmt{NAN}         & new, extended \algfmt{AN},                 \\
            &                      & can be long or short                       \\
7           & \algfmt{EAN}         & new, extended \algfmt{AN}, short form      \\
8           & \algfmt{XAN}         & new, extended \algfmt{AN}, long form       \\ \cmidrule{1-3}
9           & \algfmt{FIDE}        & FIDE handbook                              \\
10          & \algfmt{FIDE point}  & point in FIDE handbook                     \\
\bottomrule
\end{tabular}
\caption{Abbreviations}
\label{tbl:Appendix/Introduction/Abbreviations}
\end{table}

For official reference FIDE handbook is used, current date of publication is 2018-01-01: \\
\href{https://handbook.fide.com/chapter/E012018}{https://handbook.fide.com/chapter/E012018}.

Here, \algfmt{CAN} is used to indicate compatibility with Classical Chess notation, even if
examples are written on chessboards for other variants. \algfmt{CAN} almost always means
short notation, and only occasionally long, if appropriate.

Point in FIDE handbook refers to a code under which definition can be found on above website,
e.g. \algfmt{FIDE~C.9.3}.

\clearpage % ..........................................................

\subsection*{Variants}
\addcontentsline{toc}{subsection}{Variants}
\label{sec:Appendix/Introduction/Variants}

\begin{table}[!h]
\centering
\begin{tabular}{ rll }
\toprule
\textbf{Id} & \textbf{Variant} & \textbf{Contains}                  \\
\midrule
\multirow{6}{*}{1} & \multirow{6}{*}{Classical chess} & Pawn        \\
                   &                                  & Knight      \\
                   &                                  & Bishop      \\
                   &                                  & Rook        \\
                   &                                  & Queen       \\
                   &                                  & King        \\ \cmidrule{1-3}
                 2 & Croatian Ties                    & Pegasus     \\
                 3 & Mayan Ascendancy                 & Pyramid     \\
                 4 & Age of Aquarius                  & Unicorn     \\
                 5 & Miranda's Veil                   & Wave        \\
                 6 & Nineteen                         & Star        \\
                 7 & Hemera's Dawn                    & Centaur     \\
                 8 & Tamoanchan Revisited             & Serpent     \\
                 9 & Conquest of Tlalocan             & Shaman      \\
                10 & Discovery                        & Monolith    \\
                11 & One                              & Starchild   \\
\bottomrule
\end{tabular}
\caption{Variants}
\label{tbl:Appendix/Introduction/Variants}
\end{table}

Each new variant contains all previously introduced pieces. For instance, Age of Aquarius
beside Unicorn also contains Pyramid and Pegasus, on top of all classical pieces.

\clearpage % ..........................................................

\subsection*{Chessboards}
\addcontentsline{toc}{subsection}{Chessboards}
\label{sec:Appendix/Introduction/Chessboards}

\begin{table}[!h]
\centering
\begin{tabular}{ rlrrcrr }
\toprule
\textbf{Id} & \textbf{Variant}      & \multicolumn{2}{c}{ \textbf{Files} } & ~ & \multicolumn{2}{c}{ \textbf{Ranks} }   \\ \cmidrule{3-4} \cmidrule{6-7}
            &                       & \emph{min} & \emph{max}              &   & \emph{min} & \emph{max}                \\
\midrule
          1 & Classical chess       & a          & h                       &   & 1          &  8                        \\ % \cmidrule{1-6}
          2 & Croatian Ties         & a          & j                       &   & 1          & 10                        \\
          3 & Mayan Ascendancy      & a          & l                       &   & 1          & 12                        \\
          4 & Age of Aquarius       & a          & n                       &   & 1          & 14                        \\
          5 & Miranda's Veil        & a          & p                       &   & 1          & 16                        \\
          6 & Nineteen              & a          & r                       &   & 1          & 18                        \\
          7 & Hemera's Dawn         & a          & t                       &   & 1          & 20                        \\
          8 & Tamoanchan Revisited  & a          & v                       &   & 1          & 22                        \\
          9 & Conquest of Tlalocan  & a          & x                       &   & 1          & 24                        \\
         10 & Discovery             & a          & x                       &   & 1          & 24                        \\
         11 & One                   & a          & z                       &   & 1          & 26                        \\
\bottomrule
\end{tabular}
\caption{Chessboards}
\label{tbl:Appendix/Introduction/Chessboards}
\end{table}

Positions on a chessboard are written the same as in base algebraic notation, file + rank,
e.g. \alg{m2} is initial position of light Pawn in Nineteen variant.

Maximum rank on a chessboard also represents the size of that board; all boards are squares.
For instance, Hemera's Dawn variant is played on a chessboard with maximum rank of 20, so
board size for that variant is 20 x 20.

\clearpage % ..........................................................

\subsection*{Pieces}
\addcontentsline{toc}{subsection}{Pieces}
\label{sec:Appendix/Introduction/Pieces}

\begin{table}[!h]
\centering
\begin{tabular}{ rlll }
\toprule
\textbf{Id} & \textbf{Piece} & \textbf{Symbol} & \textbf{Introduced in}           \\
\midrule
1           & Pawn           & P               & \multirow{6}{*}{Classical chess} \\
2           & Knight         & N               &                                  \\
3           & Bishop         & B               &                                  \\
4           & Rook           & R               &                                  \\
5           & Queen          & Q               &                                  \\
6           & King           & K               &                                  \\ \cmidrule{1-4}
7           & Pegasus        & G               & Croatian Ties                    \\
8           & Pyramid        & A               & Mayan Ascendancy                 \\
9           & Unicorn        & U               & Age of Aquarius                  \\
10          & Wave           & W               & Miranda's Veil                   \\
11          & Star           & T               & Nineteen                         \\
12          & Centaur        & C               & Hemera's Dawn                    \\
13          & Serpent        & S               & Tamoanchan Revisited             \\
14          & Shaman         & H               & Conquest of Tlalocan             \\
15          & Monolith       & M               & Discovery                        \\
16          & Starchild      & I               & One                              \\
\bottomrule
\end{tabular}
\caption{Pieces}
\label{tbl:Appendix/Introduction/Pieces}
\end{table}

Each piece is present in variant in which it is introduced, and all subsequent ones.
For example, Shaman is introduced in Conquest of Tlalocan variant, so it's also present
in succeeding variants, Discovery and One.

\clearpage % ..........................................................

\section*{Notation}
\addcontentsline{toc}{section}{Notation}
\label{sec:Appendix/Notation}

Simple movement is denoted the same way as in \algfmt{CAN}, piece (always written as upper case) +
destination field, which consists of rank (always written in lower case) + file (a number).

In this example of \hyperref[fig:scn_ct_03_define_step_ply]{Pegasus moving to destination field 3},
movement of the piece would be written as \alg{Gf8}. The same movement in \algfmt{XAN}, would be
written as \alg{Gc2-f8}.

When moving Pawn, symbol is omitted, so only destination field is written. In this example of
\hyperref[fig:04_croatian_ties_en_passant]{Pawn rushing to field 2}, movement can be written as
\alg{h5}. Long notation would be \alg{h2-h5}.

\subsection*{Disambiguation}
\addcontentsline{toc}{subsection}{Disambiguation}
\label{sec:Appendix/Notation/Disambiguation}

Disambiguation is position notation, shortened to minimum neccessary to distinguish from another
position(s). It contains one of: just file, just rank, rank + file, in that order of preferance.
This is the same as in \algfmt{CAN}, described in: \\
\href{https://en.wikipedia.org/wiki/Algebraic\_notation\_(chess)\#Disambiguating\_moves}{https://en.wikipedia.org/wiki/Algebraic\_notation\_(chess)\\
\#Disambiguating\_moves}, see also \algfmt{FIDE C.10}.
Only difference is that disambiguation really affects plies (movement of a single piece),
and not move as a whole, as multiple pieces might get moved in a single, cascading move.

For instance, should \hyperref[fig:scn_ct_03_define_step_ply]{Pegasus simple move example}
had another light Pegasus at \alg{i2} field, move to destination field 3 would be written
as \alg{Gcf8}.

\subsection*{Capturing}
\addcontentsline{toc}{subsection}{Capturing}
\label{sec:Appendix/Notation/Capturing}

Capturing move is denoted with \alg{*} (asterisk) at the end, usually followed by the captured
piece. Only for Classical Chess capturing is denoted with \algcty{x}, before destination field.
Here, \hyperref[fig:scn_ct_04_pegasus_movement]{Pegasus could capture opponent's Pawn}, which
would be written as \alg{Gg4*P}, or just \alg{Gg4*}, if captured piece is not needed.

In \algfmt{CAN}, the same move would be written as \algcty{Gxg4}. Note, FIDE handbook requires
captures made by Pawn to contain starting file, \algcty{x}, and then destination field; see
\algfmt{FIDE~C.9.3}.
If \hyperref[fig:scn_mv_22_wave_activation_by_capture_pawn]{Wave activated by Pawn example} had
dark Wave instead of light one, light Pawn would be able to capture it, which in \algfmt{CAN}
would be written as \algcty{fxe8}. The same move in new notation is written as \alg{e8*}, and
if captured piece is also written \alg{e8*W}.

\subsection*{Castling}
\addcontentsline{toc}{subsection}{Castling}
\label{sec:Appendix/Notation/Castlingn}

Castling is noted with \alg{\&} (ampersand), after King's symbol and destination file. This
\hyperref[fig:age_of_aquarius_castling_left_04]{castling example} would be written as \alg{Kd\&},
and this \hyperref[fig:one_castling_right_04]{castling example} as \alg{Kr\&}. File at which
castling Rook ended can be written after \alg{\&}, the same examples would now be written as
\alg{Kd\&e} and \alg{Kr\&q}.

Losing ability to castle is denoted with \alg{\&\&} (double ampersand) just after piece, just
before destination field, or just before movement notation (e.g. individual steps). Using previous
examples, if Rooks moved to their destination fields without castling, it would be written as
\alg{R\&\&e1}, and \alg{R\&\&q1}, and in \algfmt{XAN} it would be \alg{R\&\&a1-e1}, and
\alg{R\&\&y1-q1}. If Rook in the first example was captured by opponent's Bishop, it would
be written as \alg{Ba1*R\&\&}.

Only for Classical Chess \algcty{0-0} and \algcty{O-O} for King's side, \algcty{0-0-0} and
\algcty{O-O-O} for Queen's side are accepted as castling notation.

\subsection*{Pawn promotion}
\addcontentsline{toc}{subsection}{Pawn promotion}
\label{sec:Appendix/Notation/Pawn promotion}

Pawn promotion is also written the same way as in \algfmt{CAN}, as described in detail: \\
\href{https://en.wikipedia.org/wiki/Algebraic\_notation\_(chess)\#Pawn\_promotion}{https://en.wikipedia.org/wiki/Algebraic\_notation\_(chess)\\
\#Pawn\_promotion}, with Pawn's destination field + piece to which it was promoted to,
like so: \alg{e8Q}. Inserting \alg{=} (equal sign) between field and promoted-to piece
is also supported, e.g. \alg{e8=Q}.

If \hyperref[fig:scn_aoa_05_delayed_promo_pawn_2_moved]{promotion is being delayed}, usage of
\alg{=} is mandatory, as there is no immediate piece to promote to, e.g. \alg{l14=}.
If \hyperref[fig:scn_aoa_04_delayed_promo_pawn_2_tagged]{Pawn tagged for promotion} moves
before actual promotion, it losses its tag, which is denoted with \alg{==} (double equal
sign) just after piece, just before destination field, or just before movement notation
(e.g. individual steps), like so \alg{==e12}. In \algfmt{XAN} the same move would be noted
as \alg{P==e11-e12}.

If the same example contained e.g. dark Bishop at \alg{f12}, Pawn tagged for promotion could
capture it, which would be written as \alg{==f12*B}.

If, in the same situation, light Pawn instead of moving was captured by dark Unicorn on a
field where it was tagged for promotion, it would be written as \alg{Ue11*P==}, and in
\algfmt{XAN} it would be \alg{Ud7-e11*P==}.

\subsection*{Ply}
\addcontentsline{toc}{subsection}{Ply}
\label{sec:Appendix/Notation/Ply}

\hyperref[sec:Terms/Ply]{Ply} is a movement of a single piece in a cascading move. Two plies
are separated by \~{} (tilde). In the example starting with
\hyperref[fig:scn_ma_11_cascading_init]{Queen activating a Pyramid}, which then activates another
Pyramid; example is comprised of series of 4 images, each corresponding to one ply, while last
image depicts ending state. This can be written as \alg{Qf7\~{}Ai7\~{}Ai9}.

In \algfmt{XAN}, the same would be written as \\
\alg{Qk2-f7\~{}Af7-i7\~{}Ai7-i9}. A pair of \alg{[}, \alg{]} (square brackets) can be used to
gather each ply, like so: \\
\alg{[Qk2-f7]\~{}[Af7-i7]\~{}[Ai7-i9]}.

\subsection*{En passant}
\addcontentsline{toc}{subsection}{En passant}
\label{sec:Appendix/Notation/En passant}

En passant is denoted with \alg{:} (colon), after destination field. In this
\hyperref[fig:04_croatian_ties_en_passant]{en passant example} dark Pawn on the right might capture
light Pawn if rushed, which is written as \alg{h3:}. Rank of captured Pawn can be written after
\alg{:}, so our example might now be \alg{h3:5}, if captured Pawn has been rushed to field 2.

If disambiguation is needed, it is written as previously described. Usually, it's enough to add
starting file before destination field. If previous example had additional dark Pawn located at
\alg{g4}, en passant would be written as \alg{ih3:}, or \alg{ih3:5}.

In \algfmt{CAN}, both en passant and its disambiguation form are written as \algcty{ixh3 e.p.},
where \algcty{e.p.} stands for en passant; see \algfmt{FIDE~C.9.3}.

Losing ability to rush is denoted with \alg{::} (double colon) just after piece, just before
destination field, or just before movement notation (e.g. individual steps). For instance, in this
\hyperref[fig:scn_n_03_teleport_move_2]{teleporting example}, after dark Rook's failed teleportation,
light Bishop could capture dark Pawn on its initial position, which would be denoted as \alg{Br17*P::},
and in \algfmt{XAN} it would be \alg{Bq18-r17*P::}.

In this \hyperref[fig:scn_mv_18_activating_rush_pawn_init]{activating Pawns example}, light Pawn on
the left is being activated, and can capture dark Knight. This would be written as
\alg{Re2\~{}Wc2\~{}P::b3*N}, and in \algfmt{XAN} it would be \alg{[Re6-e2]\~{}[We2-c2]\~{}[P::c2-b3*N]}.

\subsection*{Conversion}
\addcontentsline{toc}{subsection}{Conversion}
\label{sec:Appendix/Notation/Conversion}

Conversion is noted with \alg{\%} (percentage) after destination field. Example starting with
\hyperref[fig:scn_ma_08_conversion_init]{Bishop activating Pyramid}, which then converts opponent's
Rook is covered by 3 images, 2 corresponding to 2 plies, and last one is for ending state. This
is written as \alg{Bd5\~{}Ah5\%}. Optionally, converted piece can be written after \alg{\%} symbol,
so it would be \alg{Bd5\~{}Ah5\%R}.

In \algfmt{XAN}, it would be \alg{Bh9-d5\~{}Ad5-h5\%}. With both plies gathered and converted piece
noted it would be \alg{[Bh9-d5]\~{}[Ad5-h5\%R]}.

Starchild is immune to conversion, Pyramid attempting such a thing is
\hyperref[sec:Terms/Oblation]{oblationed}. Failed conversion is noted with \alg{\%\%} (double percentage)
after destination field. This example of
\hyperref[fig:scn_o_17_starchild_conversion_immunity_init]{conversion immunity} would be written as
\alg{Bl23\~{}Ah23\%\%}. In \algfmt{XAN}, with ply gathering, it would be
\alg{[Bs16-l23]\~{}[Al23-h23\%\%]}.

\subsection*{Complex movement}
\addcontentsline{toc}{subsection}{Complex movement}
\label{sec:Appendix/Notation/Complex movement}

Individual steps are separated by \alg{.} (single dot), multiple steps are separated by \alg{..} (two dots).
In this example, \hyperref[fig:scn_hd_05_centaur_multi_step]{Centaur has to choose 2 different steps},
which it will then follow for the rest of ply. Lets say that destination field is 6, writing it as
just \alg{Cp15} is not good enough since at least 2 different paths lead to the same destination field.

The best way to write it is with both initial steps, i.e. \alg{C.c5.g6..p15}, because this is exactly definition
of such a movement, and will contain no ambiguity. Sometimes, it might be enough if only first step is written,
i.e. \alg{C.c5..p15}. The one of other paths leading to the same \alg{Cp15} would be \alg{C.f2.g6..p15}. Note
also \alg{.} separating piece and the first step, without it first step would be taken as an initial field.

Not recomended, but still possible is to write \emph{some} step along the way, e.g. \alg{C..i11..p15}.
Care must be taken to write step which really differentiate paths, otherwise noted path might inadvertently
also denote another. For instance, in addition to original path, \alg{C..j9..p15} might also denote
\alg{C.b4.f5..p15}, which happens to cross \alg{j9} as well.

\subsection*{Capturing-ply}
\addcontentsline{toc}{subsection}{Capturing-ply}
\label{sec:Appendix/Notation/Capturing-ply}

Shaman can capture multiple pieces in one capturing-ply.
\hyperref[fig:scn_cot_03_light_shaman_capture_ply]{In this example} capture-ply just above horizontal line
would be written as \alg{H.h10*.l11*.p12\~{}Wn8}, if activated Wave is moved down, to the right. In \algfmt{XAN}
(with starting field, captured pieces and plies gathered), it would be \alg{[Hd9.h10*P.l11*P.p12]\~{}[Wn8]}.

\subsection*{Trance-journey}
\addcontentsline{toc}{subsection}{Trance-journey}
\label{sec:Appendix/Notation/Trance-journey}

Trance-journey is noted with \alg{@} (at sign), instead of normal ply separator \alg{\~{}} (tilde),
before \hyperref[fig:scn_o_18_trance_journey_init_starchild]{entranced piece} takes off. This
\hyperref[fig:scn_cot_18_light_light_shaman_interaction_start]{trance-journey example}, if without any
interactions with pieces on entranced Shaman's step-fields, would be written as \alg{Hd11\~{}We13@Hg24}.
In \algfmt{XAN}, it would be \alg{[Hf10-d11]\~{}[Wd11-e13]@[He13-g24]}.

Displacements are noted by writing \alg{<} (less-than) immediately after step in which a piece is reached,
followed by field of displacement. Optionally, displaced piece can be written before displacement-field. The
same \hyperref[fig:scn_cot_19_light_light_shaman_interaction_end]{trance-journey example}, now with all
interactions taken into account, would be written as \alg{Hd11\~{}We13@H..e18<i14..m12<j17..g24}.
In \algfmt{XAN}, with gathered plies and displaced pieces it would be \\
\alg{[Hf10-d11]\~{}[Wd11-e13]@}\\
\alg{[He13..e18<Ni14..m12<Pj17..g24]}.
% \alg{[Hf10-d11]\~{}[Wd11-e13]@[He13..e18<Ni14..m12<Pj17..g24]}.

Captures are noted by writing \alg{*} (asterisk) immediately after step in which a piece is reached,
optionally followed by a captured piece. This
\hyperref[fig:scn_cot_21_dark_light_shaman_interaction_end]{trance-journey example with captures} would be
written as \\
\alg{Hf12\~{}Wd9\~{}We13@H..e18*..m12*..g24}. In \algfmt{XAN}, with gathered plies and captured pieces
it would be \\
\alg{[Hi10-f12]\~{}[Wf12-d9]\~{}[Wd9-e13]@}\\
\alg{[He13..e18*N..m12*P..g24]}.
% \alg{[Hi10-f12]\~{}[Wf12-d9]\~{}[Wd9-e13]@[He13..e18*N..m12*P..g24]}.

One peculiarity of dark Shaman's trance-journey is that it starts from the far end of a pattern inward,
towards initial position of entranced Shaman. Still, dark Shaman's trance-journey is noted similar to
light's one. For instance,
\hyperref[fig:scn_cot_22_dark_dark_shaman_interaction_start]{this dark Shaman's trance-journey} would be
written as \alg{Hb14\~{}We12@H..q16*..k14*..c18}.
There is no step between Shaman's initial position and trance-journey starting field, \alg{,} (comma) is
used to separate them, like so \alg{Hb14\~{}We12@He12,w18..q16*..k14*..c18}. If initial position is omitted,
separator (i.e. comma) is still written, like so \alg{Hb14\~{}We12@H,w18..q16*..k14*..c18}. Now, in
\algfmt{XAN} with gathered plies and noted captured
pieces it would look like so\\
\alg{[He16-b14]\~{}[Wb14-e12]@}\\
\alg{[He12,w18..q16*P..k14*N..c18]}.
% \alg{[He16-b14]\~{}[Wb14-e12]@[He12,w18..q16*P..k14*N..c18]}.

Another peculiarity of dark Shaman is dual trance-journey, which is written with \alg{@@} (double at-sign),
optionally followed by list of captured pieces, each separated by \alg{,} (comma). Each piece can optionally
be followed by location where it was captured. Order of captured pieces in a list is not important. This
example of
\hyperref[fig:scn_cot_24_dark_dark_shaman_double_interaction_start]{dark Shaman's dual trance-journey} is
written just as \alg{Hb14\~{}We12@@} or, with captured pieces, as \alg{Hb14\~{}We12@@P,B,R,R,N,B,N}.
In \algfmt{XAN}, with gathered plies and capturing locations noted, it would be written as\\
\alg{[He16-b14]\~{}[Wb14-e12]@@}\\
\alg{Pq16,Bp14,Rd20,Rg6,Nk14,Bj12,Nd10}.\\
% \alg{[H-b14]\~{}[W-e12]@@Pq16,Bp14,Rd20,Rg6,Nk14,Bj12,Nd10}.
Note, sacrificed entranced dark Shaman is \emph{not} to be written in a list of captured pieces.

Failed trance-journey is noted with \alg{@@@} (triple at-sign) after entrancing ply. Optionally, oblationed
piece can be written after \alg{@@@}. In this
\hyperref[fig:scn_o_25_trance_journey_failed_2]{failed trance-journey example} all step-fields are blocked,
so entranced dark Bishop is oblationed, which is written as \alg{Hw5\~{}Wz3\~{}Iy2\~{}Iz1@@@},
and in \algfmt{XAN}, with plies gathering and oblationed piece, as \alg{[Hu2-w5]\~{}[Ww5-z3]\~{}[Iz3-y2]\~{}[Iy2-z1]@@@B}.

\subsection*{Syzygy, demoting to Pawn}
\addcontentsline{toc}{subsection}{Syzygy, demoting to Pawn}
\label{sec:Appendix/Notation/Syzygy, demoting to Pawn}

Demoting to Pawn is noted by writing \alg{>} (greater-than), optionally followed by disambiguating position,
i.e. one of rank, file or rank + file, in that order. Optional disambiguation can be preceded by piece which
was demoted, and demotion-field can be written instead of just a disambiguation. If writing just demoted piece
is enough to identify which one is it, and where, demoting position does not need to be written.

In this \hyperref[fig:scn_d_16_syzygy_2_stars_init]{syzygy example}, if Monolith was moved by light player,
then either light Wave or light Bishop could be demoted to Pawn. To be able to distinguish which one is it,
either demoting position or piece has to be written. If Bishop was chosen, that would be written as \alg{Mm12>p}.
Since there is only one light Bishop in demoting-to-Pawn syzygy, the same move could be also written as
\alg{Mm12>B}. In \algfmt{XAN}, with piece and demotion-field noted it would be \alg{Mn14-m12>Bp8}. There is
no plies gathering, since only Monolith moved, so there is only one ply.

\subsection*{Syzygy, resurrection}
\addcontentsline{toc}{subsection}{Syzygy, resurrection}
\label{sec:Appendix/Notation/Syzygy, resurrection}

Resurrection is written by appending \alg{\$} (dollar sign) after the move, followed by piece which was
resurrected. If Wave or Starchild has been resurrected on an empty field, position is appended after piece.
If there was no suitable empty field at which Wave or Starchild could be resurrected, resurrection is not
performed, which could be written by appending \alg{\$\$} (double dollar) after the ply. Since there are
no actual side-effects to failed resurrection, \alg{\$\$} is optional.

In case \hyperref[fig:scn_o_28_syzygy_starchild_init]{resurrection example} ended by
\hyperref[fig:scn_o_29_syzygy_starchild_end]{resurrecting Queen}, this would be written as \alg{It9\$Q},
and in \algfmt{XAN} it would be \alg{Ii23-t9\$Q}.

If previous example ended by \hyperref[fig:scn_o_30_syzygy_starchild_resurrection]{resurrecting Starchild},
it would be written as \alg{It9\$Iu8}. In \algfmt{XAN}, it would be \alg{Ii23-t9\$Iu8}.

If all fields suitable for resurrection are occupied, it is written as \alg{It9\$\$}, in \algfmt{XAN} it
would be \alg{Ii23-t9\$\$}. Writing it as \alg{It9}, or \alg{Ii23-t9} is fine, it just doesn't note failed
intention.

\subsection*{Teleportation}
\addcontentsline{toc}{subsection}{Teleportation}
\label{sec:Appendix/Notation/Teleportation}

Teleportation is noted by separating plies with \alg{|} (vertical bar) instead of usual \alg{\~{}} (tilde),
followed by field at which piece teleported. If Wave teleported, vertical bar is followed by Wave and its
destination field, optionally followed by activated pieces' plies, if there were any.

If piece teleported, but there is no empty portal-field, teleportation failed, and is noted with \alg{||}
(double vertical bar). The same notation is used for teleported Wave, if all step-fields are blocked, or
located off-board.

This \hyperref[fig:scn_n_02_teleport_init]{teleportation example} would be written as \alg{Ba18|q18}, in
\algfmt{XAN} it would be \alg{Bd15-a18|q18}.

This \hyperref[fig:scn_n_03_teleport_move_2]{blocked teleportation example} would be written as \alg{Ra18||},
or in \algfmt{XAN} it would be \alg{Ra13-a18||}.

In this \hyperref[fig:scn_n_04_teleport_move_3]{Wave teleporting example}, followed by
\hyperref[fig:scn_n_05_teleport_end]{Wave teleported example}, if activated Pyramid would move 2 fields upward,
complete move would be written as \alg{Gg15\~{}Wa18|Wl4\~{}Al6}. In \algfmt{XAN}, with plies gathering, it would
be \\
\alg{[Gi11-g15]\~{}[Wg15-a18]|[Wr1-l4]\~{}[Al4-l6]}.

If previous example ended with \hyperref[fig:scn_n_06_teleport_wave_blocked]{teleported Wave blocked} example,
it would be written as \alg{Gg15\~{}Wa18||}, and in \algfmt{XAN} it would be \alg{[Gi11-g15]\~{}[Wg15-a18]||}.

This \hyperref[fig:scn_d_13_teleporting_wave_cascade]{cascading teleportation example} would be written by
sequencing teleportations like so \alg{Gh2\~{}Wb4|Wa24|Wr4\~{}Bt6}, if activated Bishop would take upper-right
diagonal. In \algfmt{XAN}, with plies gathering, it would be \\
\alg{[Gj6-h2]\~{}[Wh2-b4]|[Wm18-a24]|[Wx1-r4]\~{}}\\
\alg{[Br4-t6]}.

Starchild and Wave activated by it cannot teleport, which is written as failed teleportation, i.e. with \alg{||}
(double vertical bar), followed by destination field at which piece emerged. Destination field can be optionally
preceded by emerging piece. So,
\hyperref[fig:scn_o_11_starchild_not_moving_monolith_init]{this example} would be written as \alg{Ic3||b3}.
In \algfmt{XAN}, with ply gathering and emerging piece it would be \alg{[If5-c3]||Ib3}.

Note, if there is no empty portal-field around Monolith (or a Star), piece is oblationed, and nothing is written
after \alg{||}. So, previous example with Starchild oblationed would be written as \alg{Ic3||}, or, in \algfmt{XAN}
as \alg{[If5-c3]||}.

\subsection*{Pawn-sacrifice}
\addcontentsline{toc}{subsection}{Pawn-sacrifice}
\label{sec:Appendix/Notation/Pawn-sacrifice}

Pawn-sacrifice is written by separating plies with \alg{:::} (triple colon) instead of usual \alg{\~{}} (tilde),
followed by capturing steps. All Pawn-capturing steps made by Serpent must be written, captured pieces are not
needed, as they can only be opponent's Pawns.

This \hyperref[fig:scn_tr_21_pawn_sacrifice_init]{Pawn-sacrifice} followed by
\hyperref[fig:scn_tr_22_pawn_sacrifice_end]{capturing opponent's Pawns} is written as \\
\alg{Sm15\~{}Am11:::S..m17*..m19*.l20*.m21*.n20*.o21*}. In \algfmt{XAN}, with plies gathering, it would be \\
\alg{[Sr14-m15]\~{}[Am15-m11]:::}\\
\alg{[Sm15..m17*..m19*.l20*.m21*.n20*.o21*]}.

If there aren't enough Pawns captured to isolate only one path an additional, non-capturing steps needs to be
written as well. In previous example, if Serpent stopped at \alg{m17}, at least 2 differrent paths are possible.
Previous example started with \alg{Sm15\~{}Am11:::S.l16.m17*} path, other possible path is
\alg{Sm15\~{}Am11:::S.n16.m17*}. Again, for longer paths care must be taken to write step(s) which really
differentiate paths, otherwise written path might inadvertently also denote others.

Care must also be taken to properly use step separator \alg{.} (dot), and multiple step separator \alg{..} (two
dots). Step separator \alg{.} is for separating 2 steps, where one step immediately follows the other. Multi-step
separator \alg{..} is for separating 2 steps which have at least one unwritten step in-between. For instance, first,
short path in previous paragraph (i.e. \alg{Sm15\~{}Am11:::S.l16.m17*}) might also be confused with
\alg{Sm15\~{}Am11:::S..l16..m17*}, which is a shorthand for \alg{Sm15\~{}Am11:::S.l14.k15.l16.k17.l18.m17*}, a very
different path.

\subsection*{Off-board traversal}
\addcontentsline{toc}{subsection}{Off-board traversal}
\label{sec:Appendix/Notation/Off-board traversal}

Steps onto virtual, off-board fields are not written. For trance-journey, each possible destination field designates
unique path on its own, so additional fields are neccessary only if there is some kind of interactions between
entranced Shaman and pieces on its step-fields.

For a Wave activated by Serpent, noting destination field might be enough, if destination field is on a different file
and a different rank than starting field. If destination field is on the same rank or on the same file as starting field,
then first step needs to be noted as well. In this
\hyperref[fig:scn_tr_15_serpent_activated_wave_ply]{Wave activated by Serpent} example, if destination field is \alg{j4},
then there is only one path leading to it, and it's \alg{Se5\~{}We5.f4.g5.h4.i5.j4}, so it can be noted just as
\alg{Se5\~{}Wj4}.

If destination field is \alg{i5}, which is on the same rank as Wave's ply starting field, then \alg{Se5\~{}Wi5} might be
interpreted as either \alg{Se5\~{}We5.f4.g5.h4.i5}, or as \alg{Se5\~{}We5.f6.g5.h6.i5}, so first step is needed, like so
\alg{Se5\~{}W.f4..i5}.

If Wave activated by Serpent is blocked from reaching destination field using only on-board step-fields, then only one
path exists, and only destination field is needed. For instance, if in this
\hyperref[fig:scn_tr_16_wave_out_of_board]{Wave off-board example} dark Knight were located at \alg{u9}, and destination
field is \alg{v10} it would block Wave's ply \alg{Sv6\~{}W.u7.v8.u9.v10}, and only path available to Wave would be
off-board, i.e. \alg{Sv6\~{}W..v8..v10}.

For a Wave activated by Unicorn or Centaur, noting destination field might be enough, if destination field does not share
file, rank or diagonal with starting field. For instance, if destination in this
\hyperref[fig:scn_mv_29_wave_off_board]{Wave off-board example} is field 2, then it can be noted just as \alg{Uo3\~{}Wp12}.
If, in the same example, destination is field 1, then original path is \alg{Uo3\~{}W.m4.p6.n7..o10}, the other available
path is \alg{Uo3\~{}W..n6.p7.m9.o10}, so at least one other step is needed to distinguish between the two paths.

\subsection*{Move symbols, annotations}
\addcontentsline{toc}{subsection}{Move symbols, annotations}
\label{sec:Appendix/Notation/Move symbols, annotations}

Draw offer is noted with \alg{(=)} (equal sign in brackets), see \algfmt{FIDE C.12}. Checks are noted with \alg{+} (plus sign),
checkmates are noted with \alg{\#} (hashtag), these are mandatory in \algfmt{NAN}, but optional in \algfmt{CAN}, see
\algfmt{FIDE C.13}. Placeholder for a move is \alg{...} (ellipsis), usually used to resume game score after commentary, see\\
\href{https://en.wikipedia.org/wiki/Algebraic\_notation\_(chess)\#Notation\_for\_a\_series\_of\_moves}{https://en.wikipedia.org/wiki/Algebraic\_notation\_(chess)\\
\#Notation\_for\_a\_series\_of\_moves}.

Annotations are written at the end of a complete move, e.g. \alg{ef8*!}. It is recommended to use \alg{\_} (underscore)
to separate \algfmt{AN} and annotations, like so \alg{ef8*\_!}. Usage of \alg{\_} is mandatory when annotation can be
confused for a regular chess \algfmt{AN}.

For instance, \alg{e8=} might be Pawn tagged for promotion, or both players have equal chances of winning, see\\
\href{https://en.wikipedia.org/wiki/Algebraic\_notation\_(chess)#Annotation\_symbols}{https://en.wikipedia.org/wiki/Algebraic\_notation\_(chess)\\
\#Annotation\_symbols}. In such a case, regular chess \algfmt{AN} is assumed, i.e. it is Pawn tagged for promotion.
If annotation is meant instead, it has to be written as \alg{e8\_=}.

\clearpage % ..........................................................

\section*{Summary}
\addcontentsline{toc}{section}{Summary}
\label{sec:Appendix/Summary}

Now that all symbols have been introduced, they're gathered here according to their purpose.

\subsection*{Side-effects}
\addcontentsline{toc}{subsection}{Side-effects}
\label{sec:Appendix/Summary/Side-effects}

\begin{table}[!h]
\centering
\begin{tabular}{ rllc }
\toprule
\textbf{Id} & \textbf{Symbol}      & \textbf{Side-effect}           & \textbf{Necessary?}   \\
\midrule
1           & \alg{*}              & capturing                      & -                     \\
2           & \alg{<}              & trance-journey displacement    & +                     \\ \cmidrule{1-4}
3           & \alg{==}             & lost promotion tag             & -                     \\
4           & \alg{::}             & lost rushing tag               & -                     \\
5           & \alg{\&\&}           & lost castling tag              & -                     \\ \cmidrule{1-4}
6           & \alg{:}              & en passant                     & -                     \\
7           & \alg{\&}             & castling                       & +                     \\
8           & \alg{=}              & promotion                      & -                     \\
9           & \alg{=}              & tag for promotion              & +                     \\
10          & \alg{\%}             & conversion                     & +                     \\
11          & \alg{\%\%}           & failed conversion, oblation    & +                     \\
12          & \alg{>}              & syzygy, demoting to Pawn       & +                     \\
13          & \alg{\$}             & syzygy, resurrection           & +                     \\
14          & \alg{\$\$}           & failed resurrection            & +                     \\
\bottomrule
\end{tabular}
\caption{Side-effects}
\label{tbl:Appendix/Summary/Side-effects}
\end{table}

Every side-effect is result of a single step. Most side-effects can occur only on a last step of a ply,
these are called ply side-effects. Capturing, displacement and losing (promotion, rushing, or castling)
tags are both step and ply side-effects, others are purely ply side-effects.

Losing tag is a side-effect which is caused by moving a piece (directly, or by activating it),
or by action taken on a piece (e.g. demoting a piece, converting it, etc.). So, losing tag can be
present in a piece movement alone, whether in the same ply, or the next one (if piece has been
activated). If caused by own, or opponent's actions, losing tag is a follow-up to a causing
side-effects, like capture, displacement, conversion, or demoting.

Regardless where losing tag is present (in a movement, or as a side-effect), it's always written
immediately after piece which just lost its tag. If piece is not written (e.g. Pawn has been moved),
it's written just before destination field (if in a side-effect), or just before any movement notation,
like individual steps (if in a movement).

For example, in this \hyperref[fig:scn_aoa_04_delayed_promo_pawn_2_tagged]{promotion tag example},
movement of a light Pawn cause it to lose promotion tag, which would be written as \alg{==e12},
more verbose as a \alg{P==e11.e12}, or in \algfmt{XAN} as a \alg{P==e11-e12}. If the same Pawn has
been captured by dark Unicorn, it would be written as \alg{Ue11*P==}, more verbose notation would
be \alg{Ud7.e11*P==}, or in \algfmt{XAN} it would be \alg{Ud7-e11*P==}. If the same example contained
e.g. dark Bishop on a \alg{f12} which light Pawn could capture, that would be written as \alg{==f12*B},
more verbosely as \alg{P==e11.f12*B}, or in \algfmt{XAN} it would be \alg{P==e11-f12*B}.

Revisiting this \hyperref[fig:scn_mv_18_activating_rush_pawn_init]{activating Pawns example}, light Pawn
on the left capturing dark Knight would be written as \alg{Re2\~{}Wc2\~{}P::b3*N}, more verbose notation
would be \alg{[Re6..e2]\~{}[We2..c2]\~{}[P::c2.b3*N]}, and in \algfmt{XAN} it would be
\alg{[Re6-e2]\~{}[We2-c2]\~{}[P::c2-b3*N]}.

Most of newly added side-effects are necessary to be, at least, indicated in a notation, to be able
to reconstruct what has happened. For instance, tagging for promotion (\alg{=}) is one such a side-effect,
otherwise immediate promotion could be assumed, in which case there would be missing piece to which Pawn
has been promoted to. Another example, it is necessary to indicate castling (\alg{\&}), otherwise King
would just move to a (distant) field.

Almost all of necessary side-effects also need additional data to be complete. For example, displacement
(\alg{<}) needs, at least, field at which piece has been displaced. Demoting to Pawn (\alg{>}) needs, at
very least, disambiguation to be able to find field, and from there which piece on that field has been
demoted to a Pawn.

Sometimes it's possible to choose which side-effect will take place. For instance,
\hyperref[fig:scn_ma_09_conversion_pyramid_activated]{upon reaching dark Rook with its Pyramid}, light
player is to decide whether opponent's Rook will be captured or converted. This decision cannot be
reconstructed based on movement alone. Notation for captured pieces have traditionally been optional,
and so is for all other interactions.

Old side-effects (from Classical Chess) are mostly not necessary to write down in a notation, but those
are in minority, and almost all of new side-effects are necessary. To avoid any possible confusion, in
\algfmt{NAN} all side-effects are mandatory, except tag losing side-effects (i.e. \alg{==}, \alg{::},
and \alg{\&\&}).

It is recommended to also write optional side-effects and their data, for not much more effort reader
is presented with much easier to understand notation. Compare minimalistic notation with slightly more
verbose version: \\
\alg{Re2\~{}Wc2\~{}Pb3*}, vs. \alg{Re2\~{}Wc2\~{}P::b3*N}, \\
\alg{Hb14\~{}We12@H..q16*..k14*..c18} vs. \\
\alg{Hb14\~{}We12@H,w18..q16*P..k14*N..c18}, \\
\alg{Hb14\~{}We12@@} vs. \alg{Hb14\~{}We12@@P,B,R,R,N,B,N}. % vs. \\
% \alg{Hb14\~{}We12@@Pq16,Bp14,Rd20,Rg6,Nk14,Bj12,Nd10}.

\clearpage % ..........................................................

\subsubsection*{Side-effects on pieces}
\addcontentsline{toc}{subsubsection}{Side-effects on pieces}
\label{sec:Appendix/Summary/Side-effects/Side-effects on pieces}

\begin{table}[!h]
\centering
\begin{tabular}{ rlcc }
\toprule
\textbf{Id} & \textbf{Piece} & \textbf{Disposable?} & \textbf{Promoted-to?} \\
\midrule
1           & Pawn           & +                    & -                     \\
2           & Knight         & +                    & +                     \\
3           & Bishop         & +                    & +                     \\
4           & Rook           & +                    & +                     \\
5           & Queen          & +                    & +                     \\
6           & King           & -                    & -                     \\ \cmidrule{1-4}
7           & Pegasus        & +                    & +                     \\
8           & Pyramid        & +                    & +                     \\
9           & Unicorn        & +                    & +                     \\
10          & Wave           & +                    & +                     \\
11          & Star           & -                    & -                     \\
12          & Centaur        & +                    & +                     \\
13          & Serpent        & +                    & +                     \\
14          & Shaman         & +                    & +                     \\
15          & Monolith       & -                    & -                     \\
16          & Starchild      & +                    & +                     \\
\bottomrule
\end{tabular}
\caption{Side-effects on pieces}
\label{tbl:Appendix/Summary/Side-effects/Side-effects on pieces}
\end{table}

Disposable pieces are all that can be captured, that is all but Kings, Stars and Monoliths.
Disposable pieces can be also displaced, teleported, converted, oblationed, or resurrected.
Pawn can be promoted to any other disposable piece.

Non-disposable pieces (Kings, Stars and Monoliths) cannot be captured, displaced,
teleported, converted, oblationed, or resurrected. Pawn cannot be promoted to
any non-disposable piece.

\clearpage % ..........................................................

\subsection*{Path separators}
\addcontentsline{toc}{subsection}{Path separators}
\label{sec:Appendix/Summary/Path separators}

\begin{table}[!h]
\centering
\begin{tabular}{ rlll }
\toprule
\textbf{Id} & \textbf{Symbol}      & \textbf{Separates}                         \\
\midrule
 1          & \alg{.}              & single steps                               \\
 2          & \alg{..}             & multiple steps                             \\
 3          & \alg{-}              & starting and destination field             \\ \cmidrule{1-3}
 4          & \alg{\~{}}           & plies                                      \\
 5          & \alg{|}              & teleportation                              \\
 6          & \alg{||}             & failed teleportation, oblation             \\
 7          & \alg{@}              & trance-journey                             \\
 8          & \alg{@@}             & dual trance-journey, oblation              \\
 9          & \alg{@@@}            & failed trance-journey, oblation            \\
10          & \alg{:::}            & Pawn-sacrifice                             \\ \cmidrule{1-3}
11          & \alg{,}              & items in a list                            \\
12          & \alg{[]}             & ply gathering                              \\
\bottomrule
\end{tabular}
\caption{Path separators}
\label{tbl:Appendix/Summary/Path separators}
\end{table}

First 3 symbols (\alg{.}, \alg{..} and \alg{-}) separates steps within a single ply.
Other symbols (\alg{\~{}}, \alg{|}, \alg{@} and \alg{:::}) are separators between plies;
or ply and, by extension, move terminators (\alg{||}, \alg{@@}, and \alg{@@@}).

Items separator (\alg{,}) is used where multiple items needs to be listed for a single
step (or a ply), e.g. pieces captured in a dark Shaman's dual trance-journey.

Ply gathering symbol (\alg{[]}) is just to visually enhance plies, making them easier
to tell apart, but otherwise does not contribute any new information.

\clearpage % ..........................................................

\subsection*{Move status}
\addcontentsline{toc}{subsection}{Move status}
\label{sec:Appendix/Summary/Move status}

\begin{table}[!h]
\centering
\begin{tabular}{ rlll }
\toprule
\textbf{Id} & \textbf{Symbol}      & \textbf{Status}                \\
\midrule
1           & \alg{+}              & check                          \\
2           & \alg{\#}             & checkmate                      \\ \cmidrule{1-3}
3           & \alg{\_}             & annotations separator          \\
4           & \alg{...}            & placeholder for a move         \\
5           & \alg{(=)}            & draw offer                     \\
\bottomrule
\end{tabular}
\caption{Move status}
\label{tbl:Appendix/Summary/Move status}
\end{table}

While check and checkmate status are not mandatory because of lack of information,
they do convey information, and intent to a player. Later variants are somewhat more
complex than traditional chess, so it's easier to overlook some consequences of a
single, cascading move (which may also move opponent's pieces), combined with e.g.
wild movement of Centaur, weird movement of Serpent and Shaman.

It's possible during a cascade to have checked (or even checkmated!) opponent's King,
status applies only if check (or checkmate) holds after move of a player has been
finished. To avoid any possible confusion, check and checkmate status are mandatory
in \algfmt{NAN}.

\clearpage % ..........................................................

\subsection*{Initial setups}
\addcontentsline{toc}{subsection}{Initial setups}
\label{sec:Appendix/Summary/Initial setups}

\begin{table}[!h]
\centering
\begin{tabular}{ rlrr }
\toprule
\textbf{Id} & \textbf{Variant}      & \textbf{No. of Pawn rows}     \\ \cmidrule{3-3}
                          \multicolumn{3}{r}{ \textbf{Figure row} } \\
\midrule
          1 & Classical chess       &                     1         \\
                               \multicolumn{3}{r}{ \alg{RNBQKBNR} } \\ \cmidrule{1-3}
          2 & Croatian Ties         &                     1         \\
                             \multicolumn{3}{r}{ \alg{RGNBQKBNGR} } \\ \cmidrule{1-3}
          3 & Mayan Ascendancy      &                     1         \\
                           \multicolumn{3}{r}{ \alg{RGANBQKBNAGR} } \\ \cmidrule{1-3}
          4 & Age of Aquarius       &                     1         \\
                         \multicolumn{3}{r}{ \alg{RGAUNBQKBNUAGR} } \\ \cmidrule{1-3}
          5 & Miranda's Veil        &                     1         \\
                       \multicolumn{3}{r}{ \alg{RGAUWNBQKBNWUAGR} } \\ \cmidrule{1-3}
          6 & Nineteen              &                     2         \\
                     \multicolumn{3}{r}{ \alg{TRNBWGUAQKAUGWBNRt} } \\ \cmidrule{1-3}
          7 & Hemera's Dawn         &                     2         \\
                   \multicolumn{3}{r}{ \alg{TRNBCWGUAQKAUGWCBNRt} } \\ \cmidrule{1-3}
          8 & Tamoanchan Revisited  &                     2         \\
                 \multicolumn{3}{r}{ \alg{TRNBSWUGCAQKACGUWSBNRt} } \\ \cmidrule{1-3}
          9 & Conquest of Tlalocan  &                     2         \\
               \multicolumn{3}{r}{ \alg{TRNBSCUWGAHQKHAGWUCSBNRt} } \\ \cmidrule{1-3}
         10 & Discovery             &                     2         \\
               \multicolumn{3}{r}{ \alg{TRNBSCUWGAHQKHAGWUCSBNRt} } \\ \cmidrule{1-3}
         11 & One                   &                     2         \\
             \multicolumn{3}{r}{ \alg{TRNBSICUGWAHQKHAWGUCISBNRt} } \\
\bottomrule
\end{tabular}
\caption{Initial setups of light figures}
\label{tbl:Appendix/Summary/Initial setups of light figures}
\end{table}

\clearpage % ..........................................................

Initial setups table contains complete row of pieces for light player, at the beginning of a
match. In this table, lower case letters are used to denote dark pieces. In later variants,
dark Star is positioned in bottom right corner of a chessboard, which is indicated with \alg{t}.

Dark player's setup is mirrored, with all pieces switched to opposite of light player's setup.
So, for Nineteen variant \alg{TRNBWGUAQKAUGWBNRt} becomes \alg{trnbwguaqkaugwbnrT} for dark player.

Each variant can have 1 or 2 rows of Pawns for each player, in front of its figures. For light
player, Pawn rows are rows 2 (and 3, in later variants). For dark player Pawn rows are 2nd to
last (and 3rd to last, in later variants).

\subsubsection*{Scout Pawn}
\addcontentsline{toc}{subsubsection}{Scout Pawn}
\label{sec:Appendix/Summary/Initial setups/Scout Pawn}

\begin{table}[!h]
\centering
\begin{tabular}{ rlrr }
\toprule
\textbf{Id} & \textbf{Variant}      & \multicolumn{2}{c}{ \textbf{Light scout Pawn files} } \\ \cmidrule{3-4}
            &                       & \emph{row 4}       & \emph{row 5}                     \\
\midrule
          1 & Hemera's Dawn         & \alg{cgnr}         & \alg{dfoq}                       \\
          2 & Tamoanchan Revisited  & \alg{gklp}         & \alg{hjmo}                       \\
          3 & Conquest of Tlalocan  & \alg{dhilmpqu}     & \alg{egjlmort}                   \\
          4 & Discovery             & \alg{dhilmpqu}     & \alg{egjlmort}                   \\
          5 & One                   & \alg{eijmnqrv}     & \alg{fhkmnpsu}                   \\
\bottomrule
\end{tabular}
\caption{Light scout Pawn files}
\label{tbl:Appendix/Summary/Initial setups/Light scout Pawn files}
\end{table}

In addition to 2 rows of Pawns, most of later variants also have scout Pawns, table above contains
initial positions of those for light player. For light player, scout Pawns occupy rows 4 and 5 on
chessboard. For desired variant, one would fill row on indicated files with Pawns.

For instance, \alg{cgnr} for \emph{row 4} in Hemera's Dawn variant means that light scout Pawns are
located at \alg{c4}, \alg{g4}, \alg{n4} and \alg{r4}.

For dark player, positions are mirrored, \emph{row 4} is the one closest to the dark figure row,
\emph{row 5} contains outermost scout Pawns. For Hemera's Dawn variant, \emph{row 4} translate to
\emph{row 17}, and \emph{row 5} becomes \emph{row 16}. So, the same \alg{cgnr} for \emph{row 4}
now means dark Pawns are located at \alg{c17}, \alg{g17}, \alg{n17} and \alg{r17}.

\subsubsection*{Monolith initial positions}
\addcontentsline{toc}{subsubsection}{Monolith initial positions}
\label{sec:Appendix/Summary/Monolith initial positions}

\begin{table}[!h]
\centering
\begin{tabular}{ rlrr }
\toprule
\textbf{Id} & \textbf{Variant}      & \multicolumn{2}{c}{ \textbf{Side} }   \\ \cmidrule{3-4}
            &                       & \emph{light}  & \emph{dark}           \\
\midrule
          1 & Discovery             &     \alg{b7}  &    \alg{w18}          \\
          2 & One                   &     \alg{b8}  &    \alg{y19}          \\
\bottomrule
\end{tabular}
\caption{Monolith initial positions}
\label{tbl:Appendix/Summary/Monolith initial positions}
\end{table}

Table above contains initial positions of both Monoliths, one located on light side of
chessboard, the other on dark side.

\clearpage % ..........................................................

\subsection*{Movement limits}
\addcontentsline{toc}{subsection}{Movement limits}
\label{sec:Appendix/Summary/Movement limits}

\begin{table}[!h]
\centering
\begin{tabular}{ rlrr }
\toprule
\textbf{Id} & \textbf{Variant}      & \textbf{Serpent}  & \textbf{Monolith}         \\
\midrule
          1 & Tamoanchan Revisited  &                 8 &                       --- \\
          2 & Conquest of Tlalocan  &                 8 &                       --- \\
          3 & Discovery             &                 8 &                         3 \\
          4 & One                   &                 9 &                         3 \\
\bottomrule
\end{tabular}
\caption{Movement limits}
\label{tbl:Appendix/Summary/Movement limits}
\end{table}

Movement limits table contains maximum number of steps Serpent or Monolith can make,
depending on which variant is being played. Monolith is not listed for the first 2
variants, since it has only been introduced in Discovery variant.

\clearpage % ..........................................................

\subsection*{Movement of Wave}
\addcontentsline{toc}{subsection}{Movement of Wave}
\label{sec:Appendix/Movement of Wave}

\begin{table}[!h]
\centering
\begin{tabular}{ rll }
\toprule
\textbf{Id} & \textbf{Activated by} & \textbf{Moves like}                       \\
\midrule
 1          & Pawn                  & Pawn, single direction,                   \\
            &                       & multiple steps                            \\
 2          & Knight                & Pegasus                                   \\
 3          & Bishop                & Bishop                                    \\
 4          & Rook                  & Rook                                      \\
 5          & Queen                 & Queen                                     \\
 6          & King                  & Queen                                     \\ \cmidrule{1-3}
 7          & Pegasus               & Pegasus                                   \\
 8          & Pyramid               & Rook                                      \\
 9          & Unicorn               & Centaur                                   \\
10          & Wave                  & activating Wave                           \\
11          & Star                  & ---                                       \\
12          & Centaur               & Centaur                                   \\
13          & Serpent               & Serpent, 2 alternating directions,        \\
            &                       & multiple steps                            \\
14          & Shaman                & Shaman                                    \\
15          & Monolith              & ---                                       \\
16          & Starchild             & Starchild                                 \\
\bottomrule
\end{tabular}
\caption{Movement of Wave}
\label{tbl:Appendix/Movement of Wave}
\end{table}

Wave generally moves the same way as activating piece in the moment of activation,
with ability to make multiple steps in one direction even if activated by single
step piece, e.g. Wave activated by Knight moves like a Pegasus. Another example,
Wave activated by Shaman on capturing-fields moves over that Shaman's
capturing-fields.

\hyperref[fig:scn_tr_12_serpent_activating_wave]{Wave activated by Serpent} is
exception, it moves by alternating between 2 diagonal steps, which, once chosen,
can't be changed for the remainder of Wave's ply.

Wave cannot be activated by a Star or a Monolith. Wave can teleport, if activated
by any piece, but Starchild. Wave activated by Starchild cannot neither teleport,
nor move a Star. Wave cannot activate Kings, Stars and Monoliths.

Wave activated by Pawn always moves toward opponent's figure row, either in a
straight line (if
\hyperref[fig:scn_mv_20_wave_activation_by_step_pawn]{activated on a Pawn's step-field}),
or diagonally (if
\hyperref[fig:scn_mv_22_wave_activation_by_capture_pawn]{activated on a Pawn's capture-field});
once left or right diagonal is chosen, it can't be changed for the remainder of
Wave's ply.

All other properties of Wave movement remains the same, regardless which piece
activated it: ability to "pass-through" pieces (except Monoliths) on a chessboard
as if they're not there, inability to capture any piece, ability to activate any
own piece (except King), ability to activate opponent's Wave and ability to transfer
all of received momentum to activated piece.

\clearpage % ..........................................................

\section*{Grammar}
\addcontentsline{toc}{section}{Grammar}
\label{sec:Appendix/Grammar}

\begin{table}[!h]
\centering
\begin{tabular}{ rlll }
\toprule
\textbf{Id} & \textbf{Entity}      & \textbf{Meaning}                           \\
\midrule
 1          & \algfmt{< >}         & named entity, to be substituted            \\
 2          & \algfmt{|}           & choice between 2 values, can be chained    \\
 3          & \algfmt{[ ]}         & optional item(s), zero or one time         \\
 4          & \algfmt{( )}         & optional item(s), zero or more times       \\
 5          & \algfmt{\{ \}}       & optional item(s), one or more times        \\
 6          & \algfmt{..}          & choice from range of values                \\
 7          & \algfmt{\#number}    & numbered reference                         \\
 8          & \algfmt{?}           & empty value                                \\
 9          & \alg{\_}             & space                                      \\
10          & \alg{value}          & verbatim value                             \\
11          & \algcty{value}       & compatibility value, for \algfmt{CAN}      \\
\bottomrule
\end{tabular}
\caption{Grammar}
\label{tbl:Appendix/Grammar}
\end{table}

Here, notational grammar is described in more formal, concise way. Annotations
are not covered, as they are short-hand for non-standardized commentary.

Verbatim values (e.g. \alg{x}) are as they appear in \algfmt{AN}, compatibility
values (e.g. \algcty{x}) are used exclusively for \algfmt{CAN}. Empty value
\algfmt{?} is used to denote Pawn (when its piece symbol is omitted from notation),
when there is no special side-effect to a ply, and when there is no special move
status.

Value separator \algfmt{|} is used to present choice between 2 values, e.g.
\algfmt{?} \algfmt{|} \alg{P}. Choices can be chained, as in
\algfmt{?} \algfmt{|} \alg{+} \algfmt{|} \alg{\#}. If there are too many
sequential values to list, range of choices \algfmt{..} is used instead, e.g.
\alg{a} \algfmt{..} \alg{z}.

Grouping options contain items to be repeated, \algfmt{[ ]} for items to appear
or not, \algfmt{( )} to repeat items 0 or more times, and \algfmt{\{ \}} to repeat
items at least once.

Formatting and spacing is added to improve legibility, normally \algfmt{AN} is
written without any gaps. When space is needed, it is written as \alg{\_}
(underscore). Choices and groups are also valid regardless of formatting,
spacing, e.g.
\begin{alltt}
<abc> = \alg{def}
    \alg{ghi}
  | \alg{jkl}
\end{alltt}
means \algfmt{<abc>} is to be replaced with either \alg{defghi} or \alg{jkl}.

Choices are capturing complete values separated by \algfmt{|}, or to the either
end of definition. For instance,
\begin{alltt}
<abc> = \alg{a} | \alg{b} <cde> \alg{f} | \alg{g}
\end{alltt}
has one choice with 3 distinct values, \alg{a}, \alg{b}\algfmt{<cde>}\alg{f} and
\alg{g}; and \emph{not} two choices, each with 2 distinct values, namely \alg{a} or
\alg{b}, \alg{f} or \alg{g}.

Groups can contain other groups, if they do, they are valid until first matching
closing bracket. Each closing bracket always closes exactly one group. For instance,
\begin{alltt}
<abc> = \alg{a} [ \alg{b} [ \alg{c} ] \alg{d} ] \alg{e}
\end{alltt}
gives \alg{abcde}, \alg{abde}, \alg{ae} for \algfmt{<abc>}.
Brackets cannot overlap, i.e. if group contains other group, it must be contained in
its entirety. For instance:
\begin{alltt}
<abc> = \alg{a} [ \alg{b} ( \alg{c} ] \alg{d} ) \alg{e}
\end{alltt}
is not valid example, because first group \algfmt{[ ]} is closed containing
dangling (open, but not closed) second group \algfmt{( )}.

\clearpage % ..........................................................

Choices are fully contained within enclosing group. For instance,
\begin{alltt}
<abc> = \alg{d} | \alg{e} [ \alg{f} | \alg{g} ] \alg{h} | \alg{i}
\end{alltt}
has two choices. Choice inside option group \algfmt{[ ]} has 2 possible values,
either \alg{f} or \alg{g}. Global choice (not contained in any group) has 3 possible
values: \alg{d}, \alg{e}\algfmt{[}\alg{f}\algfmt{|}\alg{g}\algfmt{]}\alg{h} or \alg{i}.
This gives \alg{d}, \alg{efh}, \alg{egh}, \alg{eh} and \alg{i} as possible values for
\algfmt{<abc>}.

Grammar is written without context, to determine which pieces, files and ranks
are available for a particular variant see
\hyperref[tbl:Appendix/Introduction/Variants]{Variants},
\hyperref[tbl:Appendix/Introduction/Chessboards]{Chessboards} and
\hyperref[tbl:Appendix/Introduction/Pieces]{Pieces} tables.

\clearpage % ..........................................................

\begin{alltt}
<pawn> = ? | \alg{P}

<classic-piece> =
  <pawn> | \alg{N} | \alg{B} | \alg{R} | \alg{Q} | \alg{K}

<passive-figure> = \alg{A} | \alg{W}

<capturing-active-piece> =
  <classic-piece> | \alg{G} | \alg{U} | \alg{C} | \alg{S} | \alg{H}

<active-piece> =
  <capturing-active-piece> | \alg{I}

<capturing-piece> =
  <capturing-active-piece> | \alg{A}

<promote-to-figure> =
  <passive-figure>
| \alg{N} | \alg{B} | \alg{R} | \alg{Q} | \alg{G} | \alg{U} | \alg{C} | \alg{S} | \alg{H} | \alg{I}

<disposable-figure> = <promote-to-figure>

<disposable-piece> = <pawn>
                   | <disposable-figure>

<figure> = <disposable-figure> | \alg{K} | \alg{T} | \alg{M}

<piece> = <pawn> | <figure>
\end{alltt}

\clearpage % ..........................................................

\begin{alltt}
<file> = \alg{a} .. \alg{z}

<rank> = \alg{1} .. \alg{26}

<field> = <file><rank>

<disambiguation> = <file>
                 | <rank>
                 | <field>

<step> = \alg{.}[\alg{.}]<field>

<stepping> =
  [<disambiguation>]<field>
| [<disambiguation>]\{<step>\}
| <field>\alg{-}<field>

<disposable-figure-losing-tag> =
  <disposable-figure>
| \alg{R\&\&}

<disposable-piece-losing-tag> =
  <disposable-piece>
| \alg{P==}
| \alg{P::}
| \alg{R\&\&}

<capturing-step> =
  <step><capturing-side-effects>
\end{alltt}

\clearpage % ..........................................................

\begin{alltt}
<capturing-side-effects> =
  \alg{*}[<disposable-piece-losing-tag>]

<en-passant-side-effects> =
  \alg{:}[<rank>]

<demoting-side-effects> =
  \alg{>}[<disposable-figure-losing-tag>]
    [<disambiguation>]

<resurrecting-side-effects> =
  \alg{$}<disposable-piece>
| \alg{$W}<field>
| \alg{$I}<field>
| \alg{$$}

<castling-side-effects> = \alg{&}[<file>]

<promoting-side-effects> =
  [\alg{=}]<promote-to-figure>

<tagging-delayed-promotion-side-effects> =
  \alg{=}

<converting-side-effects> =
  \alg{%}[<disposable-piece-losing-tag>]
| \alg{%%}
\end{alltt}

\clearpage % ..........................................................

\begin{alltt}
<shaman-capturing-cascading-ply> =
  \alg{H}[<disambiguation>](<capturing-step>)
    <step>

<shaman-capturing-terminal-ply> =
  \alg{H}[<disambiguation>]\{<capturing-step>\}

<starchild-resurrecting-ply> =
  \alg{I}<stepping><resurrecting-side-effects>

<king-castling-move> =
  \alg{K}<stepping><castling-side-effects>

<pawn-promoting-ply> =
  <pawn><stepping><promoting-side-effects>

<pawn-promoting-move> =
  <pawn><field><promoting-side-effects>

<pyramid-promotion-ply> =
  \alg{A}<stepping><promoting-side-effects>
| \alg{A}<stepping>
    <tagging-delayed-promotion-side-effects>

<pyramid-converting-ply> =
  \alg{A}<stepping><converting-side-effects>

<starchild-cascading-plies> =
  \alg{I}<stepping>\{\alg{~I}<stepping>\}
\end{alltt}

\clearpage % ..........................................................

\begin{alltt}
<starting-ply> =
  <active-piece><stepping>
| <pawn>[\alg{==}|\alg{::}]<stepping>
| \alg{R\&\&}<stepping>
| <shaman-capturing-cascading-ply>
| <starchild-resurrecting-ply>
| <pawn-promoting-ply>
| <starchild-cascading-plies>

<terminal-ply> =
  <capturing-active-piece><stepping>
    <capturing-side-effects>
| \alg{R\&\&}<stepping><capturing-side-effects>
| <pawn>[\alg{==}|\alg{::}]<stepping>
    <capturing-side-effects>
| <pawn>[\alg{==}|\alg{::}]<stepping>
    <en-passant-side-effects>
| <shaman-capturing-terminal-ply>

<terminating-ply> =
  <capturing-piece><stepping>
    <capturing-side-effects>
| (\alg{A}<stepping>\alg{~})<pyramid-promotion-ply>
| (\alg{A}<stepping>\alg{~})<pyramid-converting-ply>
| <terminal-ply>

<cascading-ply> = <starting-ply>
                | <passive-piece><stepping>

<cascading-plies> =
  \{\alg{~W}<stepping>\}\alg{~}<cascading-ply>
| (\alg{~W}<stepping>)\{\alg{~A}<stepping>\}
\end{alltt}

\clearpage % ..........................................................

\begin{alltt}
<cascade-start> =
  <starting-ply>(<cascading-plies>)

<cascade> =
  <terminal-ply>
| <cascade-start>[\alg{~}<terminating-ply>]

<cascading-start> = \{<cascading-plies>\}

<cascading> =
  \{<cascading-plies>\}
| (<cascading-plies>)\alg{~}<terminating-ply>

<wave-cascading-plies> =
  (\alg{~W}<stepping>)\alg{~}<cascading-ply>
| (\alg{~W}<stepping>)\{\alg{~A}<stepping>\}

<wave-cascading-start> =
  <wave-cascading-plies>(<cascading-plies>)
| \{<cascading-plies>\}

<wave-cascade> =
  \alg{~}<cascade>
| <wave-cascading-start>[\alg{~}<terminating-ply>]

<teleportation> =
  \alg{|}<field>
| \{\alg{|W}<stepping>\}[<move-wave-cascading>]
| \alg{||}[<disposable-piece>]<field>
| \alg{||}
\end{alltt}

\clearpage % ..........................................................

\begin{alltt}
<shaman-trance-journey-cascade> =
  \alg{H}<stepping>\{\alg{~W}<stepping>\}

<starchild-trance-journey-cascade> =
  \alg{H}<stepping>\{\alg{~W}<stepping>\}\alg{~I}<stepping>
| \alg{I}<stepping>\{\alg{~I}<stepping>\}

<trance-journey-start> =
  ?
| <disambiguation>
| \alg{,}<field>
| <disambiguation>\alg{,}<field>

<trance-journey> =
  <shaman-trance-journey-cascade>
    \alg{@H}<trance-journey-start>\{<step>
    [\alg{<}[<disposable-piece-losing-tag>]<field>]\}
| <shaman-trance-journey-cascade>
    \alg{@H}<trance-journey-start>
    \{<step>[\alg{*}[<disposable-piece-losing-tag>]]\}
| <shaman-trance-journey-cascade>
    \alg{@H}[<disambiguation>]<field>
| <starchild-trance-journey-cascade>
    \alg{@}<disposable-piece-losing-tag>
    [<disambiguation>]<field>
| <shaman-trance-journey-cascade>
    \alg{@@}[<disposable-piece-losing-tag>[<field>]
    (,<disposable-piece-losing-tag>[<field>])]
| <shaman-trance-journey-cascade>
    \alg{@@@H}
| <starchild-trance-journey-cascade>
    \alg{@@@}[<disposable-piece-losing-tag>]
\end{alltt}

\clearpage % ..........................................................

\begin{alltt}
<pawn-sacrifice> =
  \alg{S}<stepping>\alg{~A}<stepping>\alg{*}[\alg{P}[\alg{==}|\alg{::}]]\alg{:::}

<pawn-sacrifice-end> = \alg{|}<field>
                     | <move-cascading>

<pawn-sacrifice-captures> =
  \alg{S}[<disambiguation>]
    \{\alg{.}[\alg{.}]<field>[\alg{*}[\alg{P}[\alg{==}|\alg{::}]]]\}
    [<pawn-sacrifice-end>]
| \alg{S}<stepping>[<pawn-sacrifice-end>]

<move-star> =
  \alg{I}<stepping>[<resurrecting-side-effects>]
    \alg{~}\alg{T}<stepping>

<move-cascading> =
  <cascading>
| [<cascading-start>]<teleportation>
| [<cascading-start>]<trance-journey>
| [<cascading-start>]<pawn-sacrifice>
    [<pawn-sacrifice-captures>]
| [<cascading-start>]<move-star>

<move-wave-cascading> =
  <wave-cascade>
| [<wave-cascading-start>]<teleportation>
| [<wave-cascading-start>]<trance-journey>
| [<wave-cascading-start>]<pawn-sacrifice>
    [<pawn-sacrifice-captures>]
| [<wave-cascading-start>]<move-star>
\end{alltt}

% <pawn-sacrifice-end> =
%   \alg{|}<field>
% | <move-cascading>

\clearpage % ..........................................................

\begin{alltt}
<move-new> =
  <cascade>
| [<cascade-start>\alg{~}]<teleportation>
| [<cascade-start>\alg{~}]<trance-journey>
| [<cascade-start>\alg{~}]<pawn-sacrifice>
    [<pawn-sacrifice-captures>]
| [<cascade-start>\alg{~}]<move-star>

<status> = ?
         | \alg{+}
         | \alg{#}

<compatibility-capture> =
  <classic-piece>[<disambiguation>][\algcty{x}]
    <field>[<status>]
| <file>[\algcty{x}]<field>[<status>][\algcty{\_e.p.}]

<compatibility-castling> =
  \algcty{O-O-O}
| \algcty{0-0-0}
| \algcty{O-O}
| \algcty{0-0}

<move-monolith> =
  \alg{M}<stepping>[<demoting-side-effects>]

<move> =
  <move-new><status>
| <move-monolith><status>
| <king-castling-move><status>
| <pawn-promoting-move><status>
| <compatibility-capture>
| <compatibility-castling>
\end{alltt}

% \clearpage % ..........................................................

Notational grammar isn't exact, some things are difficult to formalize, some are
too cumbersome. For instance, any ply in trance-journey, teleportation and
elsewhere can be gathered in \alg{[ ]} (square brackets), just like ordinary ply.
Another example, the two notations for capturing after Pawn-sacrifice somewhat
overlaps, if there was no Pawn captured. Also, compatibility notation for capture
and castling is valid only for Classical Chess, and nowhere else. Additionaly,
algebraic notation does not distinguish between light and dark pieces, so some
of the rules are not possible to formalize at all.

Ply side-effects and move status are mandatory in \algfmt{NAN}, not optional as in
\algfmt{CAN}. These can be empty if there is no side-effect to a ply, or if there
is no check, checkmate made in a move.

\clearpage % ..........................................................
% ---------------------------------------------------- Appendix chapter
