
% Copyright (c) 2015 - 2021 Mario Mlaƒçak, mmlacak@gmail.com
% Licensed and published as Public Domain work.

% Appendix chapter ----------------------------------------------------
\chapter*{Appendix}
\addcontentsline{toc}{chapter}{Appendix}
\label{ch:Appendix}

Appendix contains description of algebraic notation, extended from the base described here: \\
\href{https://en.wikipedia.org/wiki/Algebraic\_notation\_(chess)}{https://en.wikipedia.org/wiki/Algebraic\_notation\_(chess)}. \\
This description mostly covers short notation, and is written in monospace font, e.g. \alg{Nc3}.

Parts of classic notation clashes with new developments, and so had to be covered with
exceptions made specificaly for Classical Chess, so that algebraic notation retains
compatibility with its classic form. These exceptions are written in monospace italics,
e.g. \algcty{Nxb3}.

For instance, \algcty{0-0}, \algcty{O-O} and their Queen's side siblings for castling had
to go in extended algebraic notation, since there are multiple castling choices available.
Another example, \algcty{x} as annotation for a capturing move, e.g. \algcty{Nxv3}, since
this might also be interpreted as disambiguation.

\clearpage % ..........................................................

\section*{Introduction}
\addcontentsline{toc}{section}{Introduction}
\label{sec:Appendix/Introduction}

\begin{table}[!h]
\centering
\begin{tabular}{ lll }
\toprule % ========================================================
\textbf{Symbol}      & \textbf{Description}                      \\
\midrule % --------------------------------------------------------
\algfmt{AN}          & algebraic notation, in general            \\
\cmidrule{1-2} % ..................................................
\algfmt{CAN}         & classic \algfmt{AN}, as described by FIDE \\
                     & handbook and Wikipedia, can be            \\
                     & long, short or minimal                    \\
\algfmt{LAN}         & classic \algfmt{AN}, long form            \\
\algfmt{SAN}         & classic \algfmt{AN}, short form           \\
\algfmt{MAN}         & classic \algfmt{AN}, minimal form         \\
\cmidrule{1-2} % ..................................................
\algfmt{NAN}         & new, extended \algfmt{AN},                \\
                     & can be long or short                      \\
\algfmt{EAN}         & new, extended \algfmt{AN}, short form     \\
\algfmt{XAN}         & new, extended \algfmt{AN}, long form      \\
\cmidrule{1-2} % ..................................................
\algfmt{FIDE}        & FIDE handbook                             \\
\algfmt{FIDE point}  & point in FIDE handbook                    \\
\bottomrule % =====================================================
\end{tabular}
\caption{Abbreviations}
\label{tbl:Appendix/Introduction/Abbreviations}
\end{table}

For official reference FIDE handbook is used, current date of publication is 2018-01-01: \\
\href{https://handbook.fide.com/chapter/E012018}{https://handbook.fide.com/chapter/E012018}.

Point in FIDE handbook refers to a code under which definition can be found on above website,
e.g. \algfmt{FIDE~C.9.3}.

Here, \algfmt{CAN} is used to indicate compatibility with Classical Chess notation, even if
examples are written on chessboards for other variants. \algfmt{CAN} almost always means
short notation, and only occasionally long, if appropriate.

\clearpage % ..........................................................

\subsection*{Variants}
\addcontentsline{toc}{subsection}{Variants}
\label{sec:Appendix/Introduction/Variants}

\begin{table}[!h]
\centering
\begin{tabular}{ ll }
\toprule % ======================================
\textbf{Variant} & \textbf{Contains}           \\
\midrule % --------------------------------------
\multirow{6}{*}{Classical chess} & Pawn        \\
                                 & Knight      \\
                                 & Bishop      \\
                                 & Rook        \\
                                 & Queen       \\
                                 & King        \\
\cmidrule{1-2} % ................................
Croatian Ties                    & Pegasus     \\
Mayan Ascendancy                 & Pyramid     \\
Age of Aquarius                  & Unicorn     \\
Miranda's Veil                   & Wave        \\
Nineteen                         & Star        \\
Hemera's Dawn                    & Centaur     \\
Tamoanchan Revisited             & Serpent     \\
Conquest of Tlalocan             & Shaman      \\
Discovery                        & Monolith    \\
One                              & Starchild   \\
\bottomrule % ===================================
\end{tabular}
\caption{Variants}
\label{tbl:Appendix/Introduction/Variants}
\end{table}

Each new variant contains all previously introduced pieces. For instance, Age of Aquarius
beside Unicorn also contains Pyramid and Pegasus, on top of all classical pieces.

\clearpage % ..........................................................

\subsection*{Chessboards}
\addcontentsline{toc}{subsection}{Chessboards}
\label{sec:Appendix/Introduction/Chessboards}

\begin{table}[!h]
\centering
\begin{tabular}{ lrrcrr }
\toprule % =================================================================================================
\textbf{Variant}      & \multicolumn{2}{c}{ \textbf{Files} } & ~ & \multicolumn{2}{c}{ \textbf{Ranks} }   \\
                      \cmidrule{2-3}                             \cmidrule{5-6} % ..........................
                      & \emph{min} & \emph{max}              &   & \emph{min} & \emph{max/size}           \\
\midrule % -------------------------------------------------------------------------------------------------
Classical chess       & a          & h                       &   & 1          &  8                        \\
% \cmidrule{1-6} % ...........................................................................................
Croatian Ties         & a          & j                       &   & 1          & 10                        \\
Mayan Ascendancy      & a          & l                       &   & 1          & 12                        \\
Age of Aquarius       & a          & n                       &   & 1          & 14                        \\
Miranda's Veil        & a          & p                       &   & 1          & 16                        \\
Nineteen              & a          & r                       &   & 1          & 18                        \\
Hemera's Dawn         & a          & t                       &   & 1          & 20                        \\
Tamoanchan Revisited  & a          & v                       &   & 1          & 22                        \\
Conquest of Tlalocan  & a          & x                       &   & 1          & 24                        \\
Discovery             & a          & x                       &   & 1          & 24                        \\
One                   & a          & z                       &   & 1          & 26                        \\
\bottomrule % ==============================================================================================
\end{tabular}
\caption{Chessboards}
\label{tbl:Appendix/Introduction/Chessboards}
\end{table}

Positions on a chessboard are written the same as in base algebraic notation, file + rank,
e.g. \alg{m2} is initial position of light Pawn in Nineteen variant.

Maximum rank on a chessboard also represents the size of that board; all chessboards in all
variants are squares. For instance, Hemera's Dawn variant is played on a chessboard with
maximum rank of 20, so board size for that variant is \mbox{20 $\times$ 20}.

\clearpage % ..........................................................

\subsection*{Pieces}
\addcontentsline{toc}{subsection}{Pieces}
\label{sec:Appendix/Introduction/Pieces}

\begin{table}[!h]
\centering
\begin{tabular}{ lcl }
\toprule % ===========================================================
\textbf{Piece} & \textbf{Symbol} & \textbf{Introduced in}           \\
\midrule % -----------------------------------------------------------
Pawn           & P               & \multirow{6}{*}{Classical chess} \\
Knight         & N               &                                  \\
Bishop         & B               &                                  \\
Rook           & R               &                                  \\
Queen          & Q               &                                  \\
King           & K               &                                  \\
\cmidrule{1-3} % .....................................................
Pegasus        & G               & Croatian Ties                    \\
Pyramid        & A               & Mayan Ascendancy                 \\
Unicorn        & U               & Age of Aquarius                  \\
Wave           & W               & Miranda's Veil                   \\
Star           & T               & Nineteen                         \\
Centaur        & C               & Hemera's Dawn                    \\
Serpent        & S               & Tamoanchan Revisited             \\
Shaman         & H               & Conquest of Tlalocan             \\
Monolith       & M               & Discovery                        \\
Starchild      & I               & One                              \\
\bottomrule % ========================================================
\end{tabular}
\caption{Pieces}
\label{tbl:Appendix/Introduction/Pieces}
\end{table}

Each piece is present in variant in which it is introduced, and all subsequent ones.
For example, Shaman is introduced in Conquest of Tlalocan variant, so it's also present
in succeeding variants, Discovery and One.

\clearpage % ..........................................................

\section*{Notation}
\addcontentsline{toc}{section}{Notation}
\label{sec:Appendix/Notation}

Simple movement is denoted the same way as in \algfmt{CAN}, piece (always written as upper
case) + destination field, which consists of rank (always written in lower case) + file
(a number).

In this example of \hyperref[fig:scn_ct_03_define_step_ply]{Pegasus moving to destination
field 3}, movement of the piece would be written as \alg{Gf8}. The same movement in
\algfmt{XAN}, would be written as \alg{Gc2-f8}.

When moving Pawn, symbol is omitted, so only destination field is written. In this example
of \hyperref[fig:04_croatian_ties_en_passant]{Pawn rushing to field 2}, movement can be
written as \alg{h5}. Long notation would be \alg{h2-h5}.

\subsection*{Disambiguation}
\addcontentsline{toc}{subsection}{Disambiguation}
\label{sec:Appendix/Notation/Disambiguation}

Disambiguation is position notation, shortened to minimum neccessary to distinguish from
another position(s). It contains one of: just file, just rank, rank + file, in that order
of preferance. This is the same as in \algfmt{CAN}, described in: \\
\href{https://en.wikipedia.org/wiki/Algebraic\_notation\_(chess)\#Disambiguating\_moves}{https://en.wikipedia.org/wiki/Algebraic\_notation\_(chess)\\
\#Disambiguating\_moves}, see also \algfmt{FIDE C.10}.
Disambiguation is used in a ply, to distinguish starting position of a piece from others
of the same kind that can end their movement on the same destination field, or can share
portion of a path.

For instance, should \hyperref[fig:scn_ct_03_define_step_ply]{Pegasus simple move example}
had another light Pegasus at \alg{i2} field, move to destination field 3 would be written
as \alg{Gcf8}.

\vfill

\subsection*{Capturing}
\addcontentsline{toc}{subsection}{Capturing}
\label{sec:Appendix/Notation/Capturing}

Capturing move is denoted with \alg{*} (asterisk) at the end, usually followed by the captured
piece. Only for Classical Chess capturing is denoted with \algcty{x}, before destination field.
Here, \hyperref[fig:scn_ct_04_pegasus_movement]{Pegasus could capture opponent's Pawn}, which
would be written as \alg{Gg4*P}, or just \alg{Gg4*}, if captured piece is not needed.

In \algfmt{CAN}, the same move would be written as \algcty{Gxg4}. Note, FIDE handbook requires
captures made by Pawn to contain starting file, \algcty{x}, and then destination field; see
\algfmt{FIDE~C.9.3}.
If \hyperref[fig:scn_mv_18_wave_activation_by_capture_pawn]{Wave activated by Pawn example} had
dark Wave instead of light one, light Pawn would be able to capture it, which in \algfmt{CAN}
would be written as \algcty{fxe8}. The same move in new notation is written as \alg{e8*}, and
if captured piece is also written \alg{e8*W}.

\subsection*{Castling}
\addcontentsline{toc}{subsection}{Castling}
\label{sec:Appendix/Notation/Castling}

Castling is noted with \alg{\&} (ampersand), after King's symbol and destination file. This
\hyperref[fig:age_of_aquarius_castling_left_04]{castling example} would be written as \alg{Kd\&},
and this \hyperref[fig:one_castling_right_04]{castling example} as \alg{Kr\&}. File at which
castling Rook ended can be written after \alg{\&}, the same examples would now be written as
\alg{Kd\&e} and \alg{Kr\&q}.

Only for Classical Chess \algcty{0-0} and \algcty{O-O} for King's side, \algcty{0-0-0} and
\algcty{O-O-O} for Queen's side are accepted as castling notation.

\vfill

\subsection*{Ply}
\addcontentsline{toc}{subsection}{Ply}
\label{sec:Appendix/Notation/Ply}

\hyperref[sec:Terms/Ply]{Ply} is a movement of a single piece in a cascading move. Two plies
are separated by \~{} (tilde). In the example starting with
\hyperref[fig:scn_ma_15_cascading_init]{Queen activating a Pyramid}, which then activates
another Pyramid; example is comprised of series of 4 images, each corresponding to one ply,
while last image depicts ending state. This can be written as \alg{Qf7\~{}Ai7\~{}Ai9}.

In \algfmt{XAN}, the same would be written as \\
\alg{Qk2-f7\~{}Af7-i7\~{}Ai7-i9}. A pair of \alg{[}, \alg{]} (square brackets) can be used
to gather each ply, like so: \\
\alg{[Qk2-f7]\~{}[Af7-i7]\~{}[Ai7-i9]}.

\subsection*{Pawn promotion}
\addcontentsline{toc}{subsection}{Pawn promotion}
\label{sec:Appendix/Notation/Pawn promotion}

Pawn promotion is also written the same way as in \algfmt{CAN}, as described in detail: \\
\href{https://en.wikipedia.org/wiki/Algebraic\_notation\_(chess)\#Pawn\_promotion}{https://en.wikipedia.org/wiki/Algebraic\_notation\_(chess)\\
\#Pawn\_promotion}, with Pawn's destination field + piece to which it was promoted to,
like so: \alg{e8Q}. Inserting \alg{=} (equal sign) between field and promoted-to piece
is also supported, e.g. \alg{e8=Q}.
If \hyperref[fig:scn_aoa_05_delayed_promo_pawn_2_moved]{promotion is being delayed}, usage
of \alg{=} is mandatory, as there is no immediate piece to promote to, e.g. \alg{l14=}.

If Pawn has been promoted, after being tagged for promotion, it is promoted on the same
field at which it has been tagged. Notation in such a case is similar to normal promotion,
only field written is the one already occupied by Pawn being promoted. For instance, Pawn
tagged for promotion in previous example would have its actual promotion written as e.g.
\alg{l14Q}, or as \alg{l14=Q}.

Similarly, \hyperref[fig:scn_ma_05_promo_init]{Pawn promoted by own Pyramid} just writes
chosen piece to promote to, after writing movement of a Pyramid, like so \alg{Gd8\~{}Ah8Q},
or in \algfmt{XAN} as \alg{[Gl4-d8]\~{}[Ad8-h8=Q]}.

Pawn capturing opponent's piece can also be promoted, if capture happend on opponent's
figure row. For instance, if in first, Classic Chess example light Pawn captured dark
Rook before promotion, it would be written as \alg{e8*RQ}, or better yet \alg{e8*R=Q}
to avoid possible confusion. In \algfmt{CAN}, promotion after capture would be written
as \algcty{xe8Q}, or as \algcty{xe8=Q}.

\subsection*{En passant}
\addcontentsline{toc}{subsection}{En passant}
\label{sec:Appendix/Notation/En passant}

En passant is denoted with \alg{:} (colon), after destination field. In this
\hyperref[fig:04_croatian_ties_en_passant]{en passant example} dark Pawn on the right might
capture light Pawn if rushed, which is written as \alg{h3:}. Rank of captured Pawn can be
written after \alg{:}, so our example might now be \alg{h3:5}, if captured Pawn has been
rushed to field 2.

If disambiguation is needed, it is written as previously described. Usually, it's enough to
add starting file before destination field. If previous example had additional dark Pawn
located at \alg{g4}, en passant would be written as \alg{ih3:}, or \alg{ih3:5}.

In \algfmt{CAN}, both en passant and its disambiguation form are written as
\algcty{ixh3 e.p.}, where \algcty{e.p.} stands for en passant; see \algfmt{FIDE~C.9.3}.

\vfill

\subsection*{Conversion}
\addcontentsline{toc}{subsection}{Conversion}
\label{sec:Appendix/Notation/Conversion}

Conversion is noted with \alg{\%} (percentage) after destination field. Example starting
with \hyperref[fig:scn_ma_08_conversion_init]{Bishop activating Pyramid}, which then converts
opponent's Rook is covered by 3 images, 2 corresponding to 2 plies, and last one is for ending
state. This is written as \alg{Bd5\~{}Ah5\%}. Optionally, converted piece can be written after
\alg{\%} symbol, so it would be \alg{Bd5\~{}Ah5\%R}. In \algfmt{XAN}, it would be
\alg{Bh9-d5\~{}Ad5-h5\%}. With both plies gathered and converted piece noted it would be
\alg{[Bh9-d5]\~{}[Ad5-h5\%R]}.

Starchild is immune to conversion, Pyramid attempting such a thing is
\hyperref[sec:Terms/Oblation]{oblationed}. Failed conversion is noted with \alg{\%\%}
(double percentage) after destination field. This example of
\hyperref[fig:scn_o_14_starchild_conversion_immunity_init]{conversion immunity} would be
written as \alg{Bl23\~{}Ah23\%\%}. In \algfmt{XAN}, with ply gathering, it would be
\alg{[Bs16-l23]\~{}[Al23-h23\%\%]}.

\subsection*{Complex movement}
\addcontentsline{toc}{subsection}{Complex movement}
\label{sec:Appendix/Notation/Complex movement}

Individual steps are separated by \alg{.} (single dot), multiple steps are separated by
\alg{..} (two dots). In this example,
\hyperref[fig:scn_hd_05_centaur_multi_step]{Centaur has to choose 2 different steps},
which it will then follow for the rest of ply. Lets say that destination field is 6,
writing it as just \alg{Cp15} is not good enough since at least 2 different paths lead
to the same destination field.

The best way to write it is with both initial steps, i.e. \alg{C.c5.g6..p15}, because
this is exactly definition of such a movement, and will contain no ambiguity. Sometimes,
it might be enough if only first step is written, i.e. \alg{C.c5..p15}. The one of other
paths leading to the same \alg{p15} field would be \alg{C.f2.g6..p15}. Note also \alg{.}
separating piece and the first step, without it first step would be taken as an initial
field.

Not recommended, but still possible is to write \emph{some} step along the way, e.g.
\alg{C..i11..p15}. Care must be taken to write step which really differentiate paths,
otherwise noted path might inadvertently also denote another. For instance, in addition
to original path, \alg{C..j9..p15} might also denote \alg{C.b4.f5..p15}, which happens
to cross \alg{j9} as well.

\subsection*{Capturing-ply}
\addcontentsline{toc}{subsection}{Capturing-ply}
\label{sec:Appendix/Notation/Capturing-ply}

Shaman can capture multiple pieces in one capturing-ply.
\hyperref[fig:scn_cot_03_light_shaman_capture_ply]{In this example} capture-ply just above
horizontal line would be written as \alg{H.h10*.l11*.p12\~{}Wn8}, if activated Wave is moved
down, to the right. In \algfmt{XAN} (with starting field, captured pieces and plies gathered),
it would be \alg{[Hd9.h10*P.l11*P.p12]\~{}[Wp12-n8]}.

\subsection*{Transparency}
\addcontentsline{toc}{subsection}{Transparency}
\label{sec:Appendix/Notation/Transparency}

Passing "through" (or "over") a piece is noted by using \alg{\^{}} (caret), optionally
followed by a piece which has been "passed-over".

For instance, in \hyperref[fig:scn_mv_07_wave_is_transparent]{this example} light Queen
could capture dark Pegasus, which would be written as \newline
\alg{Q..m4\^{}..j7\^{}..g10*}, or in \algfmt{XAN} as \newline
\alg{Qo2..m4\^{}W..j7\^{}W..g10*G}.

\subsection*{Divergence}
\addcontentsline{toc}{subsection}{Divergence}
\label{sec:Appendix/Notation/Divergence}

Diverging a piece is noted by using \alg{/} (slash), optionally followed by divergent
piece.

For instance, in \hyperref[fig:scn_mv_56_own_wave_is_divergent_init]{this example} light
Queen could capture dark Pegasus, after "passing-through" dark Wave, and then diverging
from light Wave. This could be written as \newline
\alg{Q..m4\^{}..j7/..m10*}, or in \algfmt{XAN} as \newline
\alg{Qo2..m4\^{}W..j7/W..m10*G}.

\subsection*{Trance-journey}
\addcontentsline{toc}{subsection}{Trance-journey}
\label{sec:Appendix/Notation/Trance-journey}

Trance-journey is noted with \alg{@} (at sign), instead of normal ply separator \alg{\~{}}
(tilde), before \hyperref[fig:scn_o_22_light_starchild_init_trance_journey]{entranced piece} takes
off. This \hyperref[fig:scn_cot_21_light_light_shaman_interaction_start]{trance-journey example},
if without any interactions with pieces on entranced Shaman's step-fields, would be written
as \alg{Hd11\~{}We13@Hg24}. In \algfmt{XAN}, it would be \alg{[Hf10-d11]\~{}[Wd11-e13]@[He13-g24]}.

Displacements are noted by writing \alg{<} (less-than) immediately after step in which a
piece is reached, followed by field of displacement. Optionally, displaced piece can be
written before displacement-field. The same
\hyperref[fig:scn_cot_22_light_light_shaman_interaction_end]{trance-journey example},
now with all interactions taken into account, would be written as
\alg{Hd11\~{}We13@H..e18<i14..m12<j17..g24}. In \algfmt{XAN}, with gathered plies and
displaced pieces it would be \\
\alg{[Hf10-d11]\~{}[Wd11-e13]@}\\
\alg{[He13..e18<Ni14..m12<Pj17..g24]}.
% \alg{[Hf10-d11]\~{}[Wd11-e13]@[He13..e18<Ni14..m12<Pj17..g24]}.

Captures are noted by writing \alg{*} (asterisk) immediately after step in which a piece
is reached, optionally followed by a captured piece. This
\hyperref[fig:scn_cot_24_dark_light_shaman_interaction_end]{trance-journey example with captures}
would be written as \\
\alg{Hf12\~{}Wd9\~{}We13@H..e18*..m12*..g24}. In \algfmt{XAN}, with gathered plies and
captured pieces it would be \\
\alg{[Hi10-f12]\~{}[Wf12-d9]\~{}[Wd9-e13]@}\\
\alg{[He13..e18*N..m12*P..g24]}.
% \alg{[Hi10-f12]\~{}[Wf12-d9]\~{}[Wd9-e13]@[He13..e18*N..m12*P..g24]}.

One peculiarity of dark Shaman's trance-journey is that it starts from the far end of a
pattern inward, towards initial position of entranced Shaman. Still, dark Shaman's
trance-journey is noted similar to light's one. For instance,
\hyperref[fig:scn_cot_25_dark_dark_shaman_interaction_start]{this dark Shaman's trance-journey}
would be written as \alg{Hb14\~{}We12@H..q16*..k14*..c18}.
There is no step between Shaman's initial position and trance-journey starting field,
\alg{,} (comma) is used to separate them, like so \alg{Hb14\~{}We12@He12,w18..q16*..k14*..c18}.
If initial position is omitted, separator (i.e. comma) is still written, like so
\alg{Hb14\~{}We12@H,w18..q16*..k14*..c18}. Now, in \algfmt{XAN} with gathered plies and noted
captured pieces it would look like so\\
\alg{[He16-b14]\~{}[Wb14-e12]@}\\
\alg{[He12,w18..q16*P..k14*N..c18]}.
% \alg{[He16-b14]\~{}[Wb14-e12]@[He12,w18..q16*P..k14*N..c18]}.

Another peculiarity of dark Shaman is dual trance-journey, which is written with \alg{@@}
(double at-sign), optionally followed by list of captured pieces, each separated by \alg{,}
(comma). Each piece can optionally be followed by location where it was captured. Order of
captured pieces in a list is not important. This example of
\hyperref[fig:scn_cot_27_dark_dark_shaman_double_interaction_start]{dark Shaman's dual trance-journey}
is written just as \alg{Hb14\~{}We12@@} or, with captured pieces, as
\alg{Hb14\~{}We12@@P,B,R,R,N,B,N}. In \algfmt{XAN}, with gathered plies and capturing
locations noted, it would be written as \\
\alg{[He16-b14]\~{}[Wb14-e12]@@}\\
\alg{Pq16,Bp14,Rd20,Rg6,Nk14,Bj12,Nd10}.\\
% \alg{[H-b14]\~{}[W-e12]@@Pq16,Bp14,Rd20,Rg6,Nk14,Bj12,Nd10}.
Note, sacrificed entranced dark Shaman is \emph{not} to be written in a list of captured
pieces.

Failed trance-journey is noted with \alg{@@@} (triple at-sign) after entrancing ply.
Optionally, oblationed piece can be written after \alg{@@@}. In this
\hyperref[fig:scn_o_30_trance_journey_failed_2]{failed trance-journey example} all
step-fields are blocked, so entranced dark Bishop is oblationed, which is written as
\alg{Hw5\~{}Wz3\~{}Iy2\~{}Iz1@@@}, and in \algfmt{XAN}, with plies gathering and
oblationed piece, as \alg{[Hu2-w5]\~{}[Ww5-z3]\~{}[Iz3-y2]\~{}[Iy2-z1]@@@B}.

\subsection*{Syzygy, demoting to Pawn}
\addcontentsline{toc}{subsection}{Syzygy, demoting to Pawn}
\label{sec:Appendix/Notation/Syzygy, demoting to Pawn}

Demoting to Pawn is noted by writing \alg{>} (greater-than), optionally followed by
disambiguating position, i.e. one of rank, file or rank + file, in that order. Optional
disambiguation can be preceded by piece which was demoted, and demotion-field can be
written instead of just a disambiguation. If writing just demoted piece is enough to
identify which one is it, and where, demoting position does not need to be written.

In this \hyperref[fig:scn_d_21_syzygy_2_stars_init]{syzygy example}, if Monolith was
moved by light player, then either light Wave or light Bishop could be demoted to Pawn.
To be able to distinguish which one is it, either demoting position or piece has to be
written. If Bishop was chosen, that would be written as \alg{Mm12>p}. Since there is
only one light Bishop in demoting-to-Pawn syzygy, the same move could be also written
as \alg{Mm12>B}. In \algfmt{XAN}, with piece and demotion-field noted it would be
\alg{Mn14-m12>Bp8}. There is no plies gathering, since only Monolith moved, so there
is only one ply.

\subsection*{Syzygy, resurrection}
\addcontentsline{toc}{subsection}{Syzygy, resurrection}
\label{sec:Appendix/Notation/Syzygy, resurrection}

Resurrection is written by appending \alg{\$} (dollar sign) after the move, followed by
piece which was resurrected. If Wave or Starchild has been resurrected on an empty field,
position is appended after piece. If resurrecting opponent's piece, \alg{\$\$} (double
dollar) sign is appended after the move, followed by a piece to resurrect.

If there was no suitable empty field at which Wave or Starchild could be resurrected,
resurrection is not performed, which could be written by appending \alg{\$\$\$} (triple
dollar) after the ply. Since there are no actual side-effects to failed resurrection,
\alg{\$\$\$} is optional.

If \hyperref[fig:scn_o_32_syzygy_starchild_init]{resurrection by light player} ended by
\hyperref[fig:scn_o_33_syzygy_starchild_end]{resurrecting own, light Queen}, it would be
written as \alg{It9\$Q}, and in \algfmt{XAN} it would be \alg{Ii23-t9\$Q}.

If, in the same example light player resurrected opponent's, dark Queen instead, it would
be written as \alg{It9\$\$Q}, and in \algfmt{XAN} it would be \alg{Ii23-t9\$\$Q}.

If previous example ended by
\hyperref[fig:scn_o_34_syzygy_starchild_resurrection]{resurrecting Starchild}, it would
be written as \alg{It9\$Iu8}. In \algfmt{XAN}, it would be \alg{Ii23-t9\$Iu8}.

If all fields suitable for resurrection are occupied, it is written as \alg{It9\$\$\$},
in \algfmt{XAN} it would be \alg{Ii23-t9\$\$\$}. Writing it as \alg{It9}, or \alg{Ii23-t9}
is fine, it just doesn't note failed intention.

\vfill % Otherwise whole section is positioned at the bottom of a page (!?).

\subsection*{Teleportation}
\addcontentsline{toc}{subsection}{Teleportation}
\label{sec:Appendix/Notation/Teleportation}

Teleportation is noted by separating plies with \alg{|} (vertical bar) instead of usual
\alg{\~{}} (tilde), followed by field at which piece teleported. If Wave teleported, vertical
bar is followed by Wave and its destination field, optionally followed by activated pieces'
plies, if there were any.

If piece teleported, but there is no empty portal-field, teleportation failed, and is noted
with \alg{||} (double vertical bar). The same notation is used for teleported Wave, if all
step-fields are blocked, or located off-board.

This \hyperref[fig:scn_n_02_teleport_init]{teleportation example} would be written as
\alg{Ba18|q18}, in \algfmt{XAN} it would be \alg{Bd15-a18|q18}.

This \hyperref[fig:scn_n_03_teleport_move_2]{blocked teleportation example} would be written
as \alg{Ra18||}, or in \algfmt{XAN} it would be \alg{Ra13-a18||}.

In this \hyperref[fig:scn_n_04_teleport_move_3]{Wave teleporting example}, followed by
\hyperref[fig:scn_n_05_teleport_end]{Wave teleported example}, if activated Pyramid would
move 2 fields upward, complete move would be written as \newline
\alg{Gg15\~{}Wa18|Wl4\~{}Al6}. In \algfmt{XAN}, with plies gathering, it would be \\
\alg{[Gi11-g15]\~{}[Wg15-a18]|[Wr1-l4]\~{}[Al4-l6]}.

If previous example ended with
\hyperref[fig:scn_n_06_teleport_wave_blocked]{teleported Wave blocked} example, it would be
written as \alg{Gg15\~{}Wa18||}, and in \algfmt{XAN} it would be
\alg{[Gi11-g15]\~{}[Wg15-a18]||}.

This \hyperref[fig:scn_d_17_teleporting_wave_cascade]{cascading teleportation example} would
be written by sequencing teleportations like so \alg{Gh2\~{}Wb4|Wa24|Wr4\~{}Bt6}, if activated
Bishop would take upper-right diagonal. In \algfmt{XAN}, with plies gathering, it would be \\
\alg{[Gj6-h2]\~{}[Wh2-b4]|[Wm18-a24]|[Wx1-r4]\~{}}\\
\alg{[Br4-t6]}.

Starchild and Wave activated by it cannot teleport, which is written as failed teleportation,
i.e. with \alg{||} (double vertical bar), followed by destination field at which piece emerged.
Destination field can be optionally preceded by emerging piece. So,
\hyperref[fig:scn_o_07_starchild_not_moving_monolith_init]{this example} would be written as
\alg{Ic3||b3}. In \algfmt{XAN}, with ply gathering and emerging piece it would be
\alg{[If5-c3]||Ib3}.

Note, if there is no empty portal-field around Monolith (or a Star), piece is oblationed, and
nothing is written after \alg{||}. So, previous example with Starchild oblationed would be
written as \alg{Ic3||}, or, in \algfmt{XAN} as \alg{[If5-c3]||}.

\subsection*{Pawn-sacrifice}
\addcontentsline{toc}{subsection}{Pawn-sacrifice}
\label{sec:Appendix/Notation/Pawn-sacrifice}

Pawn-sacrifice is written by separating plies with \alg{;;} (double semicolon) instead of
usual \alg{\~{}} (tilde), followed by capturing steps. All Pawn-capturing steps made by
Serpent must be written, captured pieces are not needed, as they can only be opponent's
Pawns.

This \hyperref[fig:scn_tr_19_pawn_sacrifice_init]{Pawn-sacrifice} followed by
\hyperref[fig:scn_tr_20_pawn_sacrifice_end]{capturing opponent's Pawns} is written as \\
\alg{Sm15\~{}Am11;;S..m17*..m19*.l20*.m21*.n20*.o21*}. In \algfmt{XAN}, with plies
gathering, it would be \\
\alg{[Sr14-m15]\~{}[Am15-m11];;}\\
\alg{[Sm15..m17*..m19*.l20*.m21*.n20*.o21*]}.

If there aren't enough Pawns captured to isolate only one path an additional, non-capturing
steps needs to be written as well. In previous example, if Serpent stopped at \alg{m17}, at
least 2 differrent paths are possible. Previous example started with
\alg{Sm15\~{}Am11;;S.l16.m17*} path, other possible path is \alg{Sm15\~{}Am11;;S.n16.m17*}.
Again, for longer paths care must be taken to write step(s) which really differentiate paths,
otherwise written path might inadvertently also denote others.

Care must also be taken to properly use step separator \alg{.} (dot), and multiple step
separator \alg{..} (two dots). Step separator \alg{.} is for separating 2 steps, where one
step immediately follows the other. Multi-step separator \alg{..} is for separating 2 steps
which have at least one unwritten step in-between. For instance, first, short path in
previous paragraph (i.e. \alg{Sm15\~{}Am11;;S.l16.m17*}) might also be confused with
\alg{Sm15\~{}Am11;;S..l16..m17*}, which is a shorthand for
\alg{Sm15\~{}Am11;;S.l14.k15.l16.k17.l18.m17*}, a very different path.

\subsection*{Off-board traversal}
\addcontentsline{toc}{subsection}{Off-board traversal}
\label{sec:Appendix/Notation/Off-board traversal}

Steps onto virtual, off-board fields are not written. For trance-journey, each possible
destination field designates unique path on its own, so additional fields are neccessary
only if there is some kind of interactions between entranced Shaman and pieces on its
step-fields.

For a Wave activated by Serpent, noting destination field might be enough, if destination
field is on a different file and a different rank than starting field. If destination field
is on the same rank or on the same file as starting field, then first step needs to be noted
as well. In this \hyperref[fig:scn_tr_24_serpent_activated_wave_ply]{Wave activated by Serpent}
example, if destination field is \alg{j4}, then there is only one path leading to it, and
it's \alg{Se5\~{}We5.f4.g5.h4.i5.j4}, so it can be noted just as \alg{Se5\~{}Wj4}.

If destination field is \alg{i5}, which is on the same rank as Wave's ply starting field,
then \alg{Se5\~{}Wi5} might be interpreted as either \alg{Se5\~{}We5.f4.g5.h4.i5}, or as \newline
\alg{Se5\~{}We5.f6.g5.h6.i5}, so first step is needed, like so \alg{Se5\~{}W.f4..i5}.

If Wave activated by Serpent is blocked from reaching destination field using only on-board
step-fields, then only one path exists, and only destination field is needed. For instance,
if in this
\hyperref[fig:scn_tr_25_wave_out_of_board]{Wave off-board example} dark Knight were located at
\alg{u9}, and destination field is \alg{v10} it would block Wave's ply \alg{Sv6\~{}W.u7.v8.u9.v10},
and only path available to Wave would be off-board, i.e. \alg{Sv6\~{}W..v8..v10}.

For a Wave activated by Unicorn or Centaur, noting destination field might be enough, if
destination field does not share file, rank or diagonal with starting field. For instance, if
destination in this \hyperref[fig:scn_mv_25_wave_off_board]{Wave off-board example} is field 2,
then it can be noted just as \alg{Uo3\~{}Wp12}. If, in the same example, destination is field 1,
then original path is \alg{Uo3\~{}W.m4.p6.n7..o10}, the other available path is
\alg{Uo3\~{}W..n6.p7.m9.o10}, so at least one other step is needed to distinguish between the
two paths.

\subsection*{Losing tags}
\addcontentsline{toc}{subsection}{Losing tags}
\label{sec:Appendix/Notation/Losing tags}

Losing tag is a side-effect of a tagged piece being moved, captured, etc. As such, losing tag can
also \hyperref[tbl:Appendix/Summary/Accompanying-losing-tags]{accompany some other side-effects}.
So, losing tag is denoted immediately after piece symbol, but before any positional, or movement
notation, depending on what is available. Writing lost tag is completely optional, it's meant to
remind readers what happened and when.

Losing ability to castle is denoted with \alg{\&\&} (double ampersand).
\hyperref[sec:Appendix/Notation/Castling]{Using previous castling examples}, if Rooks
moved to their destination fields without castling, it would be written as \alg{R\&\&e1},
and \alg{R\&\&q1}, and in \algfmt{XAN} it would be \alg{R\&\&a1-e1}, and \alg{R\&\&y1-q1}.
If, in the first example, there were opponent's Bishop on light Rook's neighboring-field
capturing it, it would be written as \alg{Ba1*R\&\&}, or as \alg{Bb2-a1*R\&\&} in
\algfmt{XAN}.

If \hyperref[fig:scn_aoa_04_delayed_promo_pawn_2_tagged]{Pawn tagged for promotion} moves
before actual promotion, it losses its tag, which is denoted with \alg{==} (double equal
sign), like so \alg{==e12}. In \algfmt{XAN} the same move would be noted as \alg{P==e11-e12}.

If the same example contained e.g. dark Bishop at \alg{f12}, Pawn tagged for promotion could
capture it, which would be written as \alg{==f12*B}, and in \algfmt{XAN} as \alg{P==e11-f12*B}.

If, in the same situation, light Pawn instead of moving was captured by dark Unicorn on a
field where it was tagged for promotion, it would be written as \alg{Ue11*P==}, and in
\algfmt{XAN} it would be \alg{Ud7-e11*P==}.

Losing ability to rush is denoted with \alg{::} (double colon). For instance, in this
\hyperref[fig:scn_n_03_teleport_move_2]{teleporting example}, after dark Rook's failed
teleportation, light Bishop could capture dark Pawn on its initial position, which would
be denoted as \alg{Br17*P::}, and in \algfmt{XAN} it would be \alg{Bq18-r17*P::}.

In this \hyperref[fig:scn_mv_31_activating_rush_pawn_init]{activating Pawns example}, light
Pawn on the left is being activated, and can capture dark Knight. This would be written as
\alg{Re2\~{}Wc2\~{}P::b3*N}, and in \algfmt{XAN} it would be
\alg{[Re6-e2]\~{}[We2-c2]\~{}[P::c2-b3*N]}.

\subsection*{Default pathing}
\addcontentsline{toc}{subsection}{Default pathing}
\label{sec:Appendix/Notation/Default pathing}

In Classical Chess, all pieces have exactly one path from starting field to destination,
so to specify unique path only destination is needed when writing movement of a piece.
This is no longer so for newly added pieces. For instance, Serpent can have multiple paths
leading to the same destination, those can overlap, and even have different lengths.

In \hyperref[fig:scn_tr_05_serpent_end]{this Serpent's movement example}, assuming that
starting position is \alg{c3}, and destination \alg{g3}, depicted complete path is
\alg{Sc3.d4.c5.d6.e5.f6.g5.f4.g3}. Even with as few steps as possible, to have unique path
it would still need to be written as \alg{S..d6..f6..g3}.

However, one of the shortest paths (here, e.g. \\
\alg{Sc3.d4.e3.f4.g3}) would result in exactly the same outcome, namely Serpent moved from
\alg{c3} onto \alg{g3}, with no additional interactions taking place. Even with additional
side-effects, most of the time it does not matter if a piece made long or short path to e.g.
capture opponent's piece.

The only time when length of a path is important is in a cascade, when momentum is build-up
by first piece, and spent by others. For instance, in a
\hyperref[fig:scn_tr_06_serpent_loop_1]{Serpent activating Pyramid example}, depending on
a path taken by Serpent, Pyramid might get 4 or 8 momentum when activated.

Even so, exact path taken by a piece is not important, only amount of a momentum gathered,
and spent. To correctly support movement of pieces in a cascade, momentum built by first
piece has to be maximized, and momentum spent by activated pieces minimized. So, all movement
can be written with just destination field; path is assumed to be the shortest possible for
all pieces, except for the first piece in a cascade, which is assumed to be taking the longest
path available.

First example here can then be written as \alg{Sg3}, this would be taken as if
\alg{Sc3.d4.e3.f4.g3} is written, i.e. light Serpent would be taking the shortest path
available. Next example would be written as \alg{Sc7\~{}Ad7}, if Pyramid moved 1 field
to the right; movement is assumed to be \alg{[Sc3.d4.c5.d6.e5.d4.c5.d6.c7]\~{}[Ac7-d7]},
that is, light Serpent would take the longest path available, since it's the first piece
in a cascade.

\subsection*{Move symbols, annotations}
\addcontentsline{toc}{subsection}{Move symbols, annotations}
\label{sec:Appendix/Notation/Move symbols, annotations}

Placeholder for a move is \alg{...} (three dots), usually used to resume game score
after commentary, see \\
\href{https://en.wikipedia.org/wiki/Algebraic\_notation\_(chess)\#Notation\_for\_a\_series\_of\_moves}
{https://en.wikipedia.org/wiki/\\
Algebraic\_notation\_(chess)\#Notation\_for\_a\_series\_of\_moves}.

Checks are noted with \alg{+} (plus sign), checkmates are noted with \alg{\#} (hashtag),
these are optional in \algfmt{CAN}, see \algfmt{FIDE C.13}. Self-checkmates are written
as stand-alone \alg{\#} (hashtag) on an opponent's turn as a complete move, which ends
a game, like so:

\algcycpar
\algcyc{92.}{...}{\#}{Light player checkmated self.}
\algcycparend

Note, self-checkmate is a claim that opponent checkmated self, it has to be validated
by e.g. arbiters. If it's not valid, self-checkmate is rejected as if player tried to
perform an invalid move, and game continues with a player putting forward such a claim
still "on turn".

Resigns are written with \alg{\#\#} (double hashtag) as a complete move, which also
ends a game, like so:

\algcycpar
\algcyc{92.}{...}{\#\#}{Dark player resigns.}
\algcycparend

Draw offer is noted with \alg{(=)} (equal sign in brackets), see \algfmt{FIDE C.12};
it's written immediately following a completed move notation (which might include check),
like so:

\algcycpar
\algcyc{71.}{Nb3+(=)}{...}{Light player offers draw.}
\algcycparend

Draw offer can be accepted, as long as draw offered by the opponent is valid, i.e. not
canceled, by writing \alg{(==)} (two equal signs in brackets) as a complete move, which
ends a game, like so:

\algcycpar
\algcyc{82.}{...}{(==)}{Dark player accepts draw offer.}
\algcycparend

Draw offer can be canceled by writing \alg{(-)} (minus sign in brackets), after a complete
move, like so:

\algcycpar
\algcyc{79.}{Bc7+(-)}{...}{Light player cancels draw offer.}
\algcycparend

Forced draw, i.e. draw by rules, is written with \alg{(===)} (three equal signs in
brackets) as a complete move, this also ends a game, like so:

\algcycpar
\algcyc{82.}{...}{(===)}{Draw forced, by the rules.}
\algcycparend

In \algfmt{NAN} checks are optional; checkmates, self-checkmates, resigns, accepted
and forced draws are all mandatory, to set game score end. Draw offers, cancelations
are mandatory to set limits within which draw offer is valid, and can be accepted by
the opponent.

Annotations are written at the end of a complete move, draw offer, e.g. \alg{ef8*!},
\alg{Nb3(=)=}. It is recommended to use \alg{\_} (underscore) to separate \algfmt{AN}
and annotations, like so \alg{ef8*\_!}, \alg{Nb3(=)\_=}. Usage of underscore is
mandatory when annotation can be confused for a regular chess \algfmt{AN}.

For instance, \alg{e8=} might be Pawn tagged for promotion, or both players have equal
chances of winning, see\\
\href{https://en.wikipedia.org/wiki/Algebraic\_notation\_(chess)#Annotation\_symbols}
{https://en.wikipedia.org/wiki/Algebraic\_notation\_(chess)\\
\#Annotation\_symbols}. In such a case, regular chess \algfmt{AN} is assumed, i.e. it
is Pawn tagged for promotion. If annotation is meant instead, it has to be written as
\alg{e8\_=}.

\clearpage % ..........................................................

\section*{Summary}
\addcontentsline{toc}{section}{Summary}
\label{sec:Appendix/Summary}

Now that all symbols have been introduced, they're gathered here according to their purpose.

\subsection*{Side-effects}
\addcontentsline{toc}{subsection}{Side-effects}
\label{sec:Appendix/Summary/Side-effects}

\begin{table}[!h]
\centering
\begin{tabular}{ rlc }
\toprule % ===========================================================================
\textbf{Symbol}             & \textbf{Side-effect}          & \textbf{Mandatory?}   \\
\midrule % ---------------------------------------------------------------------------
\alg{*}                     & capturing                     & -                     \\
\alg{<}                     & trance-journey displacement   & +                     \\
\cmidrule{1-3} % .....................................................................
\alg{==}                    & lost promotion tag            & -                     \\
\alg{::}                    & lost rushing tag              & -                     \\
\alg{\&\&}                  & lost castling tag             & -                     \\
\cmidrule{1-3} % .....................................................................
\alg{:}                     & en passant                    & -                     \\
\alg{\&}                    & castling                      & -                     \\
\alg{=}                     & promotion                     & +                     \\
\alg{=}                     & tag for promotion             & -                     \\
\alg{\%}                    & conversion                    & +                     \\
\alg{\%\%}                  & failed conversion, oblation   & +                     \\
\alg{\^{}}                  & transparency                  & -                     \\
\alg{/}                     & divergence                    & -                     \\
\alg{>}                     & syzygy, demoting to Pawn      & +                     \\
\alg{\$}                    & syzygy, resurrection          & +                     \\
\cmidrule{1-3} % .....................................................................
\multirow{2}{*}{\alg{\$\$}} & syzygy, resurrecting          & \multirow{2}{*}{+}    \\
                            & opponent's piece              &                       \\
\cmidrule{1-3} % .....................................................................
\alg{\$\$\$}                & failed resurrection           & -                     \\
\bottomrule % ========================================================================
\end{tabular}
\caption{Side-effects}
\label{tbl:Appendix/Summary/Side-effects}
\end{table}

Every side-effect is result of a single step. Most side-effects can occur only on
a last step of a ply, these are called ply side-effects. Capturing, displacement
and losing (promotion, rushing, or castling) tags are both step and ply side-effects,
others are purely ply side-effects.

In Classical Chess capturing opponent's piece is the most prevalent side-effect,
since there aren't all that many, and those can be done once per Pawn (en passant,
promotion), or once per whole game (castling). So, in \algfmt{CAN} capturing is
optional, see \algfmt{FIDE C.9}; this is so in \algfmt{NAN} as well.

Most mandatory side-effects are marked as such, because otherwise \algfmt{AN}
would lack information to describe what happened. Trance-journey displacement
has to have a destination field where a piece has been displaced. Promotion
needs a promoted-to piece written, otherwise it's assumed that a Pawn has been
tagged for promotion. Demoting to Pawn syzygy has to have, at very least, a
disambiguation (or piece, if unique) written to be able to find which piece
has been demoted, and on which field. Resurrection syzygy must have a piece
which has been resurrected, if initiating Starchild was not oblationed then
destination field as well.

Other mandatory side-effects are designated as such, because otherwise it could
be assumed that targeted piece has been captured. Conversion, and failed conversion
are such side-effects.

It is recommended to also write optional side-effects and their data, for not much
more effort reader is presented with much easier to understand notation. Compare
minimalistic notation with slightly more verbose version:

\noindent
\alg{Re2\~{}Wc2\~{}b3} vs. \\
\alg{Re2\~{}Wc2\~{}b3*} vs. \\
\alg{Re2\~{}Wc2\~{}P::b3*N},

\noindent
\alg{Hb14\~{}We12@H..q16..k14..c18} vs. \\
\alg{Hb14\~{}We12@H..q16*..k14*..c18} vs. \\
\alg{Hb14\~{}We12@H,w18..q16*P..k14*N..c18},

\noindent
\alg{Hb14\~{}We12@@} vs. \\
\alg{Hb14\~{}We12@@P,B,R,R,N,B,N} vs. \\
\alg{Hb14\~{}We12@@Pq16,Bp14,Rd20,Rg6,Nk14,Bj12,Nd10}.

\clearpage % ..........................................................

\subsection*{Accompanying losing tags}
\addcontentsline{toc}{subsection}{Accompanying losing tags}
\label{sec:Appendix/Summary/Accompanying-losing-tags}

\begin{table}[!h]
\centering
\begin{tabular}{ rlccc }
\toprule % ==================================================================================================================
\textbf{Sym.}               & \textbf{Side-effect}  & \multicolumn{3}{c}{ \textbf{Accompanying losing tags} }              \\
                                                    \cmidrule{3-5} % ........................................................
                            &                       & \emph{castling}      & \emph{promoting}      & \emph{rushing}        \\
\midrule % ------------------------------------------------------------------------------------------------------------------
\alg{*}                     & capture               & +                    & +                     & +                     \\
\cmidrule{1-5} % ............................................................................................................
\multirow{2}{*}{\alg{<}}    & trance-journey        & \multirow{2}{*}{+}   & \multirow{2}{*}{+}    & \multirow{2}{*}{+}    \\
                            & displacement          &                      &                       &                       \\
\cmidrule{1-5} % ............................................................................................................
\alg{:}                     & en passant            & -                    & -                     & -                     \\
\alg{\&}                    & castle                & *                    & -                     & -                     \\
\alg{=}                     & promotion             & -                    & *                     & -                     \\
\alg{=}                     & tag for promotion     & -                    & -                     & -                     \\
\alg{\%}                    & conversion            & -                    & +                     & -                     \\
\cmidrule{1-5} % ............................................................................................................
\multirow{2}{*}{\alg{\%\%}} & failed conversion,    & \multirow{2}{*}{-}   & \multirow{2}{*}{-}    & \multirow{2}{*}{-}    \\
                            & oblation              &                      &                       &                       \\
\cmidrule{1-5} % ............................................................................................................
\alg{\^{}}                  & transparency          & -                    & -                     & -                     \\
\alg{/}                     & divergence            & -                    & -                     & -                     \\
\cmidrule{1-5} % ............................................................................................................
\multirow{2}{*}{\alg{>}}    & syzygy,               & \multirow{2}{*}{+}   & \multirow{2}{*}{-}    & \multirow{2}{*}{-}    \\
                            & demoting to Pawn      &                      &                       &                       \\
\cmidrule{1-5} % ............................................................................................................
\alg{\$}                    & syzygy, resurrection  & -                    & -                     & -                     \\
\cmidrule{1-5} % ............................................................................................................
\multirow{2}{*}{\alg{\$\$}} & syzygy, resurrecting  & \multirow{2}{*}{-}   & \multirow{2}{*}{-}    & \multirow{2}{*}{-}    \\
                            & opponent's piece      &                      &                       &                       \\
\cmidrule{1-5} % ............................................................................................................
\alg{\$\$\$}                & failed resurrection   & -                    & -                     & -                     \\
\bottomrule % ===============================================================================================================
\end{tabular}
\caption{Accompanying losing tags}
\label{tbl:Appendix/Summary/Accompanying-losing-tags}
\end{table}

Table above lists most side-effects in rows. Some of those side-effects could also cause
targeted piece to lose its promoting, rushing, or castling tag. Losing tags (accompanying
those side-effects) are listed as columns. For instance, Rook still holding its castling
tag can be captured, which is indicated by + (plus sign), under column \emph{castling},
and row \emph{capture}.

Some combinations are not possible, which is noted by - (minus sign). For example, Pawn
holding promoting tag cannot be captured by en passant move, as indicated by - at
\emph{promoting} column and \emph{en passant} row. This is so because Pawn can get
promoting tag only on opponent's side of chessboard, while it can be subjected to en passant
only on own side of chessboard.

Two combinations are actually using a tag, those are indicated by * (asterisk). Using a
tag implicitly loses it, since no tag can be repeatedly applied (e.g. Pawn after promotion
cannot be promoted again), so using a tag is not written as tag loss in \algfmt{AN}. For
instance, a Rook having castling tag can castle, as found under \emph{castling} column,
and \emph{castle} row. Another instance is a Pawn holding promoting tag which it can use,
found in \emph{promoting} column and \emph{promotion} row.

\clearpage % ..........................................................

\subsubsection*{Side-effects on pieces}
\addcontentsline{toc}{subsubsection}{Side-effects on pieces}
\label{sec:Appendix/Summary/Side-effects/Side-effects on pieces}

\begin{table}[!h]
\centering
\begin{tabular}{ lcc }
\toprule % =====================================================
\textbf{Piece} & \textbf{Disposable?} & \textbf{Promote-to?}  \\
\midrule % -----------------------------------------------------
Pawn           & +                    & -                     \\
Knight         & +                    & +                     \\
Bishop         & +                    & +                     \\
Rook           & +                    & +                     \\
Queen          & +                    & +                     \\
King           & -                    & -                     \\
\cmidrule{1-3} % ...............................................
Pegasus        & +                    & +                     \\
Pyramid        & +                    & +                     \\
Unicorn        & +                    & +                     \\
Wave           & +                    & +                     \\
Star           & -                    & -                     \\
Centaur        & +                    & +                     \\
Serpent        & +                    & +                     \\
Shaman         & +                    & +                     \\
Monolith       & -                    & -                     \\
Starchild      & +                    & +                     \\
\bottomrule % ==================================================
\end{tabular}
\caption{Side-effects on pieces}
\label{tbl:Appendix/Summary/Side-effects/Side-effects on pieces}
\end{table}

Disposable pieces are all that can be captured, that is all but Kings, Stars and Monoliths.
Disposable pieces can be also displaced, teleported, converted, oblationed, or resurrected.
Pawn can be promoted to any other disposable piece.

Non-disposable pieces (Kings, Stars and Monoliths) cannot be captured, displaced,
teleported, converted, oblationed, or resurrected. Pawn cannot be promoted to
any non-disposable piece.

\clearpage % ..........................................................

\subsection*{Path separators}
\addcontentsline{toc}{subsection}{Path separators}
\label{sec:Appendix/Summary/Path separators}

\begin{table}[!h]
\centering
\begin{tabular}{ rl }
\toprule % =========================================================
\textbf{Symbol}      & \textbf{Separates}                         \\
\midrule % ---------------------------------------------------------
\alg{.}              & single steps                               \\
\alg{..}             & multiple steps                             \\
\alg{-}              & starting and destination field             \\
\cmidrule{1-2} % ...................................................
\alg{\~{}}           & plies                                      \\
\alg{|}              & teleportation                              \\
\alg{||}             & failed teleportation, oblation             \\
\alg{@}              & trance-journey                             \\
\alg{@@}             & dual trance-journey, oblation              \\
\alg{@@@}            & failed trance-journey, oblation            \\
\alg{;;}             & Pawn-sacrifice                             \\
\cmidrule{1-2} % ...................................................
\alg{,}              & items in a list                            \\
\alg{[}, \alg{]}     & ply gathering                              \\
\bottomrule % ======================================================
\end{tabular}
\caption{Path separators}
\label{tbl:Appendix/Summary/Path separators}
\end{table}

First 3 symbols (\alg{.}, \alg{..}, and \alg{-}) separates steps within a single ply.
Other symbols (\alg{\~{}}, \alg{|}, \alg{@}, and \alg{;;}) are separators between plies;
or ply and, by extension, move terminators (\alg{||}, \alg{@@}, and \alg{@@@}).

Items separator (\alg{,}) is used where multiple items needs to be listed for a single
step (or a ply), e.g. pieces captured in a dark Shaman's dual trance-journey.

Ply gathering symbols (\alg{[}, \alg{]}) are just wrappers around plies to visually
enhance them, making them easier to tell apart, but otherwise does not contribute any
new information.

\clearpage % ..........................................................

\subsection*{Move symbols}
\addcontentsline{toc}{subsection}{Move symbols}
\label{sec:Appendix/Summary/Move symbols}

\begin{table}[!h]
\centering
\begin{tabular}{ rl }
\toprule % =============================================
\textbf{Symbol}      & \textbf{Status}                \\
\midrule % ---------------------------------------------
\alg{+}              & check                          \\
\alg{\#}             & checkmate                      \\
\alg{\#}             & self-checkmate                 \\
\alg{\#\#}           & resign                         \\
\cmidrule{1-2} % .......................................
\alg{(=)}            & draw offered                   \\
\alg{(-)}            & draw offer withdrawn           \\
\alg{(==)}           & draw accepted                  \\
\alg{(===)}          & draw by rules                  \\
\cmidrule{1-2} % .......................................
\alg{\_}             & annotations separator          \\
\alg{...}            & placeholder for a move         \\
\bottomrule % ==========================================
\end{tabular}
\caption{Move symbols}
\label{tbl:Appendix/Summary/Move symbols}
\end{table}

Check notation is optional in \algfmt{NAN}, just like in \algfmt{CAN}, see
\algfmt{FIDE C.9}. Checkmate, self-checkmate and resign notations are mandatory,
to note end of a game score (list of moves by both players).

All of draw notations are mandatory in \algfmt{NAN}; offering draw and canceling
offer because they give an opportunity window within which draw offer can be
accepted by the opponent. Accepted draw and draw by rules notations are mandatory,
since they also note end of a game score.

Draw offer does not expire, and can be issued multiple times. If a draw offer is
not valid anymore it has to be canceled; a single \alg{(-)} cancels draw offer,
regardless how many times it was offered prior to cancelation.

\clearpage % ..........................................................

\subsection*{Initial setups}
\addcontentsline{toc}{subsection}{Initial setups}
\label{sec:Appendix/Summary/Initial setups}

\begin{table}[!h]
\centering
\begin{tabular}{ lrr }
\toprule % ===============================================
\textbf{Variant}        & \textbf{No. of Pawn rows}     \\
                                            \cmidrule{3-3}
              \multicolumn{3}{r}{ \textbf{Figure row} } \\
\midrule % -----------------------------------------------
Classical chess         &                     1         \\
                   \multicolumn{3}{r}{ \alg{RNBQKBNR} } \\
\cmidrule{1-3} % .........................................
Croatian Ties           &                     1         \\
                 \multicolumn{3}{r}{ \alg{RGNBQKBNGR} } \\
\cmidrule{1-3} % .........................................
Mayan Ascendancy        &                     1         \\
               \multicolumn{3}{r}{ \alg{RGANBQKBNAGR} } \\
\cmidrule{1-3} % .........................................
Age of Aquarius         &                     1         \\
             \multicolumn{3}{r}{ \alg{RGAUNBQKBNUAGR} } \\
\cmidrule{1-3} % .........................................
Miranda's Veil          &                     1         \\
           \multicolumn{3}{r}{ \alg{RGAUWNBQKBNWUAGR} } \\
\cmidrule{1-3} % .........................................
Nineteen                &                     2         \\
         \multicolumn{3}{r}{ \alg{TRNBWGUAQKAUGWBNRt} } \\
\cmidrule{1-3} % .........................................
Hemera's Dawn           &                     2         \\
       \multicolumn{3}{r}{ \alg{TRNBCWGUAQKAUGWCBNRt} } \\
\cmidrule{1-3} % .........................................
Tamoanchan Revisited    &                     2         \\
     \multicolumn{3}{r}{ \alg{TRNBSWUGCAQKACGUWSBNRt} } \\
\cmidrule{1-3} % .........................................
Conquest of Tlalocan    &                     2         \\
   \multicolumn{3}{r}{ \alg{TRNBSCUWGAHQKHAGWUCSBNRt} } \\
\cmidrule{1-3} % .........................................
Discovery               &                     2         \\
   \multicolumn{3}{r}{ \alg{TRNBSCUWGAHQKHAGWUCSBNRt} } \\
\cmidrule{1-3} % .........................................
One                     &                     2         \\
 \multicolumn{3}{r}{ \alg{TRNBSICUGWAHQKHAWGUCISBNRt} } \\
\bottomrule % ============================================
\end{tabular}
\caption{Initial setups of light figures}
\label{tbl:Appendix/Summary/Initial setups of light figures}
\end{table}

\clearpage % ..........................................................

Initial setups table contains complete row of figures for light player, at the
beginning of a match. In this table, lower case letters are used to denote dark
pieces. In later variants, dark Star is positioned in bottom right corner of a
chessboard, which is indicated with \alg{t}.

Dark player's setup is mirrored, with all figures switched to opposite of light
player's setup. So, for Nineteen variant \alg{TRNBWGUAQKAUGWBNRt} becomes
\alg{trnbwguaqkaugwbnrT} for dark player.

Each variant can have 1 or 2 rows of Pawns for each player, in front of its
figures. For light player, Pawn rows are rows 2 (and 3, in later variants).
For dark player Pawn rows are 2nd to last (and 3rd to last, in later variants).

\clearpage % ..........................................................

\subsubsection*{Scout Pawns}
\addcontentsline{toc}{subsubsection}{Scout Pawns}
\label{sec:Appendix/Summary/Initial setups/Scout Pawns}

In addition to 2 rows of Pawns, most of later variants also feature scout Pawns. \newline

\begin{table}[!h]
\centering
\begin{tabular}{ lr }
\toprule % ===================================================================
\textbf{Variant}                        & \textbf{Light scout Pawn setup}   \\
\midrule % -------------------------------------------------------------------
\multirow{2}{*}{Hemera's Dawn}          & \alg{c4,g4,n4,r4}                 \\
                                        & \alg{d5,f5,o5,q5}                 \\
\cmidrule{1-2} % .............................................................
\multirow{2}{*}{Tamoanchan Revisited}   & \alg{g4,k4,l4,p4}                 \\
                                        & \alg{h5,j5,m5,o5}                 \\
\cmidrule{1-2} % .............................................................
\multirow{4}{*}{Conquest of Tlalocan}   & \alg{d4,h4,i4,l4}                 \\
                                        & \alg{m4,p4,q4,u4}                 \\
                                        & \alg{e5,g5,j5,l5}                 \\
                                        & \alg{m5,o5,r5,t5}                 \\
\cmidrule{1-2} % .............................................................
\multirow{4}{*}{Discovery}              & \alg{d4,h4,i4,l4}                 \\
                                        & \alg{m4,p4,q4,u4}                 \\
                                        & \alg{e5,g5,j5,l5}                 \\
                                        & \alg{m5,o5,r5,t5}                 \\
\cmidrule{1-2} % .............................................................
\multirow{4}{*}{One}                    & \alg{e4,i4,j4,m4}                 \\
                                        & \alg{n4,q4,r4,v4}                 \\
                                        & \alg{f5,h5,k5,m5}                 \\
                                        & \alg{n5,p5,s5,u5}                 \\
\bottomrule % ================================================================
\end{tabular}
\caption{Light scout Pawn setups}
\label{tbl:Appendix/Summary/Initial setups/Light scout Pawn setups}
\end{table}

Table above contains initial positions of scout Pawns for light player.

\clearpage % ..........................................................

\begin{table}[!h]
\centering
\begin{tabular}{ lr }
\toprule % ===================================================================
\textbf{Variant}                        & \textbf{Dark scout Pawn setup}    \\
\midrule % -------------------------------------------------------------------
\multirow{2}{*}{Hemera's Dawn}          & \alg{c17,g17,n17,r17}             \\
                                        & \alg{d16,f16,o16,q16}             \\
\cmidrule{1-2} % .............................................................
\multirow{2}{*}{Tamoanchan Revisited}   & \alg{g19,k19,l19,p19}             \\
                                        & \alg{h18,j18,m18,o18}             \\
\cmidrule{1-2} % .............................................................
\multirow{4}{*}{Conquest of Tlalocan}   & \alg{d21,h21,i21,l21}             \\
                                        & \alg{m21,p21,q21,u21}             \\
                                        & \alg{e20,g20,j20,l20}             \\
                                        & \alg{m20,o20,r20,t20}             \\
\cmidrule{1-2} % .............................................................
\multirow{4}{*}{Discovery}              & \alg{d21,h21,i21,l21}             \\
                                        & \alg{m21,p21,q21,u21}             \\
                                        & \alg{e20,g20,j20,l20}             \\
                                        & \alg{m20,o20,r20,t20}             \\
\cmidrule{1-2} % .............................................................
\multirow{4}{*}{One}                    & \alg{e23,i23,j23,m23}             \\
                                        & \alg{n23,q23,r23,v23}             \\
                                        & \alg{f22,h22,k22,m22}             \\
                                        & \alg{n22,p22,s22,u22}             \\
\bottomrule % ================================================================
\end{tabular}
\caption{Dark scout Pawn setups}
\label{tbl:Appendix/Summary/Initial setups/Dark scout Pawn setups}
\end{table}

Table above contains initial positions of scout Pawns for dark player.

\clearpage % ..........................................................

\subsubsection*{Monolith initial positions}
\addcontentsline{toc}{subsubsection}{Monolith initial positions}
\label{sec:Appendix/Summary/Monolith initial positions}

\begin{table}[!h]
\centering
\begin{tabular}{ lrr }
\toprule % =====================================================
\textbf{Variant}      & \multicolumn{2}{c}{ \textbf{Side} }   \\
                      \cmidrule{2-3} % .........................
                      & \emph{light}  & \emph{dark}           \\
\midrule % -----------------------------------------------------
Discovery             &     \alg{b7}  &    \alg{w18}          \\
One                   &     \alg{b8}  &    \alg{y19}          \\
\bottomrule % ==================================================
\end{tabular}
\caption{Monolith initial positions}
\label{tbl:Appendix/Summary/Monolith initial positions}
\end{table}

Table above contains initial positions of both Monoliths, one located on light side of
chessboard, the other on dark side.

% \clearpage % ..........................................................

\subsection*{Movement limits}
\addcontentsline{toc}{subsection}{Movement limits}
\label{sec:Appendix/Summary/Movement limits}

\begin{table}[!h]
\centering
\begin{tabular}{ lrr }
\toprule % =============================================================
\textbf{Variant}      & \textbf{Serpent}  & \textbf{Monolith}         \\
\midrule % -------------------------------------------------------------
Tamoanchan Revisited  &                14 &                       --- \\
Conquest of Tlalocan  &                15 &                       --- \\
Discovery             &                15 &                         3 \\
One                   &                16 &                         3 \\
\bottomrule % ==========================================================
\end{tabular}
\caption{Movement limits}
\label{tbl:Appendix/Summary/Movement limits}
\end{table}

Movement limits table contains maximum number of steps Serpent or Monolith can make,
depending on which variant is being played. Monolith is not listed for the first 2
variants, since it has only been introduced in Discovery variant.

\clearpage % ..........................................................

\subsection*{Movement of Wave}
\addcontentsline{toc}{subsection}{Movement of Wave}
\label{sec:Appendix/Movement of Wave}

% \vspace*{-0.3\baselineskip} % rubber-banding area ???
\begin{table}[!h]
\centering
\begin{tabular}{ ll }
\toprule % ===============================================================
\textbf{Activated by}       & \textbf{Moves like}                       \\
\midrule % ---------------------------------------------------------------
\multirow{2}{*}{Pawn}       & Pawn, single direction,                   \\
                            & multiple steps                            \\
\cmidrule{1-2} % .........................................................
Knight                      & Pegasus                                   \\
Bishop                      & Bishop                                    \\
Rook                        & Rook                                      \\
Queen                       & Queen                                     \\
King                        & Queen                                     \\
\cmidrule{1-2} % .........................................................
Pegasus                     & Pegasus                                   \\
Pyramid                     & Rook                                      \\
Unicorn                     & Centaur, unrestricted step choices        \\
Wave                        & activating Wave                           \\
Star                        & ---                                       \\
Centaur                     & Centaur                                   \\
\cmidrule{1-2} % .........................................................
\multirow{2}{*}{Serpent}    & Serpent, 2 alternating directions,        \\
                            & multiple steps                            \\
\cmidrule{1-2} % .........................................................
Shaman                      & Shaman                                    \\
Monolith                    & ---                                       \\
Starchild                   & Starchild                                 \\
\bottomrule % ============================================================
\end{tabular}
\caption{Movement of Wave}
\label{tbl:Appendix/Movement of Wave}
\end{table}

% \vspace*{0.3\baselineskip} % hard-glued to the table ???
Wave generally moves the same way as activating piece in the moment of activation,
with ability to make multiple steps in chosen direction (until end of a chessboard
is reached), even if activating piece can make only a single step. For instance,
Wave activated by Knight moves like a Pegasus.
\hyperref[fig:scn_tr_21_serpent_activating_wave]{Wave activated by Serpent} is an
exception, it moves by alternating between 2 diagonal steps, which, once chosen,
can't be changed for the remainder of Wave's ply.

Wave moves over the same kind of fields (step- or capture-fields) as activating
piece in the moment of activation, and has the same choice of directions over those
fields regardless of any previous choice. An example, Wave activated by Shaman on a
capturing-field moves over that Shaman's capturing-fields, even if it can't capture
any piece.

Wave activated by Pawn moves toward opponent's figure row, either in a straight line
(if \hyperref[fig:scn_mv_16_wave_activation_by_step_pawn]{activated on a step-field}),
or diagonally (if
\hyperref[fig:scn_mv_18_wave_activation_by_capture_pawn]{activated on a capture-field});
once direction is chosen, it can't be changed for the remainder of Pawn's ply.
In later variants (Nineteen, and onwards)
\hyperref[fig:scn_n_15_sideways_pawn_init]{Pawn can move laterally by one step-field};
Wave activated on a step-field can now move either straight forward as before, or
sideways.

Wave activated by Unicorn moves similar to Centaur, it has to keep alternating
between two initially chosen steps, but it's not restricted in chosing second step
based on a choice of the first one. Wave can choose any two steps Unicorn could
make from its starting field and first step-field.

Wave cannot be activated by a Star or a Monolith. Wave can teleport, if activated
by any piece, but Starchild. Wave activated by Starchild cannot neither teleport,
nor activate a Star.

All other properties of Wave movement remains the same, regardless which piece
activated it, and on which (step- or capture-) field: ability to "pass-through"
pieces on a chessboard as if they're not there (except Monoliths), inability to
capture any piece, ability to activate any own piece (except King, Pyramid can't
be activated on step-fields), ability to activate opponent's Wave, ability to move
over the edge of a board as long as Wave's ply ends on it, and ability to transfer
all of received momentum to activated piece.

\clearpage % ..........................................................

\subsection*{Piece activations}
\addcontentsline{toc}{subsection}{Piece activations}
\label{sec:Appendix/Summary/Piece activations}

\begin{table}[!h]
\centering
\begin{tabular}{ lll }
\toprule % ===============================================================================================
\multicolumn{2}{c}{ \textbf{Activating} }                               & \textbf{Activated}            \\
\cmidrule{1-2} % .........................................................................................
\emph{Piece}                            & \emph{At field}               &                               \\
\midrule % -----------------------------------------------------------------------------------------------
\multirow{2}{*}{any}                    & capture, or                   & \multirow{2}{*}{own Pyramid}  \\
                                        & miracle                       &                               \\
\cmidrule{1-3} % .........................................................................................
any                                     & any                           & own Wave                      \\
\cmidrule{1-3} % .........................................................................................
\multirow{3}{*}{Wave}                   & \multirow{3}{*}{any}          & any own,                      \\
                                        &                               & except King,                  \\
                                        &                               & Pyramid                       \\
\cmidrule{1-3} % .........................................................................................
\multirow{2}{*}{Wave\footnotemark[1]}   & capture, or                   & any own,                      \\
                                        & miracle                       & except King                   \\
\cmidrule{1-3} % .........................................................................................
\multirow{2}{*}{Wave}                   & \multirow{2}{*}{any}          & opponent's                    \\
                                        &                               & Wave                          \\
\cmidrule{1-3} % .........................................................................................
Starchild                               & any                           & own Starchild                 \\
\cmidrule{1-3} % .........................................................................................
\multirow{2}{*}{Starchild}              & \multirow{2}{*}{miracle}      & any own,                      \\
                                        &                               & except King                   \\
\cmidrule{1-3} % .........................................................................................
\multirow{2}{*}{Starchild}              & \multirow{2}{*}{miracle}      & opponent's                    \\
                                        &                               & Starchild                     \\
\cmidrule{1-3} % .........................................................................................
Starchild                               & miracle                       & any Star                      \\
\bottomrule % ============================================================================================
\end{tabular}
\caption{Piece activations}
\label{tbl:Appendix/Summary/Piece activations}
\end{table}

\footnotetext[1]{If activated on capture-fields, or Starchild's miracle-fields.}

Here, activated own piece means it's in the same (dark, or light) color as
activating piece, activated opponent's piece means it's in the opposite color
to activating piece.

Wave does not have any of step-, capture-, or miracle-fields on its own; fields
are inherited from an activating piece, in the moment of activation. Activating
piece itself can be a Wave, which inherited fields from a piece preceding it in
a cascade. Every inheritance chain starts with a material (i.e. non-Wave) piece,
such a piece is called activator.

Wave inherits (step-, capture-, or miracle-) fields from an activator as a whole
set of fields over which to move. Distinction is important when those sets of
fields are different from each other, as they are for Pawns, Shamans, and
Starchilds.

For instance, Wave activated by Pawn on its step-field has to move only over that
Pawn's step-fields (from activating field straight forward, towards opponent), and
cannot move over Pawn's capture-fields (diagonally, towards opponent). Later, a
sideways step-fields are added to Pawn's repertoire; from then on, activated Wave
can also choose to move laterally, regardless if Wave was activated on a forward,
or a side step-field.

With inherited fields, Wave does not inherit what interactions it can do on those
fields. For instance, Wave cannot capture opponent's pieces, even if activated on
a capture-field.

Wave can also activate the same pieces as activating piece could activate, in the
moment of activating that Wave; with addition of activating opponent's Wave.

So, when saying that Wave can activate own Pyramid on a capture-fields, it does
not mean that Wave can now capture opponent's pieces; it just means that Wave is
moving over its activator's capture-fields; and with capture-fields Wave also got
an option to activate own Pyramid.

\clearpage % ..........................................................

\section*{Grammar}
\addcontentsline{toc}{section}{Grammar}
\label{sec:Appendix/Grammar}

\begin{table}[!h]
\centering
\begin{tabular}{ ll }
\toprule % =========================================================
\textbf{Entity}      & \textbf{Meaning}                           \\
\midrule % ---------------------------------------------------------
\algfmt{< >}         & named entity, to be substituted            \\
\algfmt{|}           & choice between 2 values, can be chained    \\
\algfmt{[ ]}         & optional item(s), zero or one time         \\
\algfmt{( )}         & optional item(s), zero or more times       \\
\algfmt{\{ \}}       & optional item(s), one or more times        \\
\algfmt{..}          & choice from range of values                \\
\algfmt{\#number}    & numbered reference                         \\
\algfmt{?}           & empty value                                \\
\alg{\_}             & space                                      \\
\alg{value}          & verbatim \algfmt{AN} value                 \\
\algcty{value}       & compatibility value, for \algfmt{CAN}      \\
\bottomrule % ======================================================
\end{tabular}
\caption{Grammar}
\label{tbl:Appendix/Grammar}
\end{table}

Here, notational grammar is described in more formal, concise way. Annotations
are not covered, as they are short-hand for non-standardized commentary.

Verbatim values (e.g. \alg{x}) are as they appear in \algfmt{AN}, compatibility
values (e.g. \algcty{x}) are used exclusively for \algfmt{CAN}. Empty value
\algfmt{?} is used to denote Pawn (when its piece symbol is omitted from notation),
when there is no special side-effect to a ply, and when there is no special move
status.

Value separator \algfmt{|} is used to present choice between 2 values, e.g.
\algfmt{?} \algfmt{|} \alg{P}. Choices can be chained, as in
\algfmt{?} \algfmt{|} \alg{+} \algfmt{|} \alg{\#}. If there are too many
sequential values to list, range of choices \algfmt{..} is used instead, e.g.
\alg{a} \algfmt{..} \alg{z}.

Grouping options contain items to be repeated, \algfmt{[ ]} for items to appear
or not, \algfmt{( )} to repeat items 0 or more times, and \algfmt{\{ \}} to repeat
items at least once.

Formatting and spacing is added to improve legibility, normally \algfmt{AN} is
written without any gaps. When space is needed, it is written as \alg{\_}
(underscore). Choices and groups are also valid regardless of formatting,
spacing, e.g.
\begin{alltt}
<abc> = \alg{def}
    \alg{ghi}
  | \alg{jkl}
\end{alltt}
means \algfmt{<abc>} is to be replaced with either \alg{defghi} or \alg{jkl}.

Choices are capturing complete values separated by \algfmt{|}, or to the either
end of definition. For instance,
\begin{alltt}
<abc> = \alg{a} | \alg{b} <cde> \alg{f} | \alg{g}
\end{alltt}
has one choice with 3 distinct values, \alg{a}, \alg{b}\algfmt{<cde>}\alg{f} and
\alg{g}; and \emph{not} two choices, each with 2 distinct values, namely \alg{a} or
\alg{b}, \alg{f} or \alg{g}.

Groups can contain other groups, if they do, they are valid until first matching
closing bracket. Each closing bracket always closes exactly one group. For instance,
\begin{alltt}
<abc> = \alg{a} [ \alg{b} [ \alg{c} ] \alg{d} ] \alg{e}
\end{alltt}
gives \alg{abcde}, \alg{abde}, \alg{ae} for \algfmt{<abc>}.
Brackets cannot overlap, i.e. if group contains other group, it must be contained in
its entirety. For instance:
\begin{alltt}
<abc> = \alg{a} [ \alg{b} ( \alg{c} ] \alg{d} ) \alg{e}
\end{alltt}
is not valid example, because first group \algfmt{[ ]} is closed containing
dangling (open, but not closed) second group \algfmt{( )}.

\clearpage % ..........................................................

Choices are fully contained within enclosing group. For instance,
\begin{alltt}
<abc> = \alg{d} | \alg{e} [ \alg{f} | \alg{g} ] \alg{h} | \alg{i}
\end{alltt}
has two choices. Choice inside option group \algfmt{[ ]} has 2 possible values,
either \alg{f} or \alg{g}. Global choice (not contained in any group) has 3 possible
values: \alg{d}, \alg{e}\algfmt{[}\alg{f}\algfmt{|}\alg{g}\algfmt{]}\alg{h} or \alg{i}.
This gives \alg{d}, \alg{efh}, \alg{egh}, \alg{eh} and \alg{i} as possible values for
\algfmt{<abc>}.

Grammar is written without context, to determine which pieces, files and ranks
are available for a particular variant see
\hyperref[tbl:Appendix/Introduction/Variants]{Variants},
\hyperref[tbl:Appendix/Introduction/Chessboards]{Chessboards} and
\hyperref[tbl:Appendix/Introduction/Pieces]{Pieces} tables.

\clearpage % ..........................................................

\begin{alltt}
<pawn> = ? | \alg{P}

<classic-piece> =
  <pawn> | \alg{N} | \alg{B} | \alg{R} | \alg{Q} | \alg{K}

<passive-figure> = \alg{A} | \alg{W}

<capturing-active-piece> =
  <classic-piece> | \alg{G} | \alg{U} | \alg{C} | \alg{S} | \alg{H}

<active-piece> =
  <capturing-active-piece> | \alg{I}

<capturing-piece> =
  <capturing-active-piece> | \alg{A}

<promote-to-figure> =
  <passive-figure>
| \alg{N} | \alg{B} | \alg{R} | \alg{Q} | \alg{G} | \alg{U} | \alg{C} | \alg{S} | \alg{H} | \alg{I}

<disposable-figure> = <promote-to-figure>

<disposable-piece> = <pawn>
                   | <disposable-figure>

<piece-transparent-to-wave> =
  <disposable-piece> | \alg{K} | \alg{T}

<figure> = <disposable-figure> | \alg{K} | \alg{T} | \alg{M}

<piece> = <pawn> | <figure>
\end{alltt}

\clearpage % ..........................................................

\begin{alltt}
<file> = \alg{a} .. \alg{z}

<rank> = \alg{1} .. \alg{26}

<field> = <file><rank>

<disambiguation> = <file>
                 | <rank>
                 | <field>

<step> = \alg{.}[\alg{.}]<field>

<stepping-no-side-effects> =
  [<disambiguation>]<field>
| [<disambiguation>]\{<step>\}
| <field>\alg{-}<field>

<transparency-side-effect> = \alg{\^{}}[\alg{W}]

<divergence-side-effect> = \alg{/}[\alg{W}|\alg{I}]

<stepping> =
  <stepping-no-side-effects>
| [<disambiguation>]
  (<step>[<transparency-side-effect>
          | <divergence-side-effect>])
  <step>

<wave-transparency-side-effect> =
  \alg{\^{}}[<piece-transparent-to-wave>]
\end{alltt}

\clearpage % ..........................................................

\begin{alltt}
<wave-stepping> =
  <stepping>
| [<disambiguation>]
  (<step>[<wave-transparency-side-effect>
          | <divergence-side-effect>])
  <step>

<pawn-losing-promotion-tag> = \alg{P==}
                            | <pawn>

<pawn-losing-tag> = \alg{P::}
| <pawn-losing-promotion-tag>

<rook-losing-tag> = \alg{R}[\alg{\&\&}]

<disposable-figure-losing-tag> =
  <disposable-figure>
| <rook-losing-tag>

<disposable-piece-losing-tag> =
  <disposable-figure-losing-tag>
| <pawn-losing-tag>

<capturing-side-effect> =
  \alg{*}[<disposable-piece-losing-tag>]

<en-passant-side-effect> = \alg{:}[<rank>]

<demoting-side-effect> =
  \alg{>}[<disposable-figure-losing-tag>]
    <disambiguation>
| \alg{>}<disposable-figure-losing-tag>
    [<disambiguation>]
\end{alltt}

\clearpage % ..........................................................

\begin{alltt}
<resurrecting-side-effect> =
  \alg{$}[\alg{$}]<disposable-piece>
| \alg{$}[\alg{$}]\alg{W}<field>
| \alg{$}[\alg{$}]\alg{I}<field>
| \alg{$$$}

<castling-side-effect> = \alg{&}[<file>]

<promoting-side-effect> =
  [\alg{=}]<promote-to-figure>

<tagging-delayed-promotion-side-effect> =
  \alg{=}

<converting-side-effect> =
  \alg{%}[<disposable-piece-losing-tag>]
| \alg{%%}

<capturing-step> =
  <step>[<capturing-side-effect>]

<shaman-capturing-cascading-ply> =
  \alg{H}[<disambiguation>](<capturing-step>)
    <step>

<shaman-capturing-terminal-ply> =
  \alg{H}[<disambiguation>]\{<capturing-step>\}
\end{alltt}

\clearpage % ..........................................................

\begin{alltt}
<starchild-resurrecting-ply> =
  \alg{I}<stepping><resurrecting-side-effect>

<king-castling-move> =
  \alg{K}<stepping>[<castling-side-effect>]

<pawn-promoting-ply> =
  <pawn><stepping><promoting-side-effect>

<pawn-promoting-move> =
  <pawn><field><promoting-side-effect>

<pyramid-promotion-ply> =
  \alg{A}<stepping><promoting-side-effect>
| \alg{A}<stepping>
    [<tagging-delayed-promotion-side-effect>]

<pyramid-converting-ply> =
  \alg{A}<stepping><converting-side-effect>

<starchild-cascading-plies> =
  \alg{I}<stepping>\{\alg{~I}<stepping>\}
\end{alltt}

\clearpage % ..........................................................

\begin{alltt}
<starting-ply> =
  <active-piece><stepping>
| <pawn-losing-tag><stepping>
| <rook-losing-tag><stepping>
| <shaman-capturing-cascading-ply>
| <starchild-resurrecting-ply>
| <pawn-promoting-ply>
| <starchild-cascading-plies>

<terminal-ply> =
  <capturing-active-piece><stepping>
    [<capturing-side-effect>]
| <rook-losing-tag><stepping>
    [<capturing-side-effect>]
| <pawn-losing-tag><stepping>
    [<capturing-side-effect>]
| <pawn-losing-promotion-tag><stepping>
    [<en-passant-side-effect>]
| <pawn-losing-promotion-tag><stepping>
    [<capturing-side-effect>]
    <promoting-side-effect>
| <shaman-capturing-terminal-ply>

<terminating-ply> =
  <capturing-piece><stepping>
    [<capturing-side-effect>]
| (\alg{A}<stepping>\alg{~})<pyramid-promotion-ply>
| (\alg{A}<stepping>\alg{~})<pyramid-converting-ply>
| <terminal-ply>

<cascading-ply> = <starting-ply>
                | <passive-piece><stepping>
\end{alltt}

\clearpage % ..........................................................

\begin{alltt}
<cascading-plies> =
  \{\alg{~W}<wave-stepping>\}\alg{~}<cascading-ply>
| (\alg{~W}<wave-stepping>)\{\alg{~A}<stepping>\}

<cascade-start> =
  <starting-ply>(<cascading-plies>)

<cascade> =
  <terminal-ply>
| <cascade-start>[\alg{~}<terminating-ply>]

<cascading-start> = \{<cascading-plies>\}

<cascading> =
  \{<cascading-plies>\}[\alg{~}<terminating-ply>]
| [\{<cascading-plies>\}\alg{~}]<terminating-ply>

<wave-cascading-plies> =
  (\alg{~W}<wave-stepping>)\alg{~}<cascading-ply>
| (\alg{~W}<wave-stepping>)\{\alg{~A}<stepping>\}

<wave-cascading-start> =
  <wave-cascading-plies>(<cascading-plies>)
| \{<cascading-plies>\}

<wave-cascade> =
  \alg{~}<cascade>
| <wave-cascading-start>[\alg{~}<terminating-ply>]

<teleportation> =
  \alg{|}<field>
| \{\alg{|W}<wave-stepping>\}[<move-wave-cascading>]
| \alg{||}[<disposable-piece>]<field>
| \alg{||}
\end{alltt}

\clearpage % ..........................................................

\begin{alltt}
<shaman-trance-journey-cascade> =
  \alg{H}<stepping>\{\alg{~W}<wave-stepping>\}

<starchild-trance-journey-cascade> =
  \alg{H}<stepping>\{\alg{~W}<wave-stepping>\}\alg{~I}<stepping>
| \alg{I}<stepping>\{\alg{~I}<stepping>\}

<trance-journey-start> =
  ?
| <disambiguation>
| \alg{,}<field>
| <disambiguation>\alg{,}<field>

<trance-journey> =
  <shaman-trance-journey-cascade>
    \alg{@H}<trance-journey-start>\{<step>
    [\alg{<}[<disposable-piece-losing-tag>]<field>]\}
| <shaman-trance-journey-cascade>
    \alg{@H}<trance-journey-start>
    \{<step>[\alg{*}[<disposable-piece-losing-tag>]]\}
| <shaman-trance-journey-cascade>
    \alg{@H}[<disambiguation>]<field>
| <starchild-trance-journey-cascade>
    \alg{@}<disposable-piece-losing-tag>
    [<disambiguation>]<field>
| <shaman-trance-journey-cascade>
    \alg{@@}[<disposable-piece-losing-tag>[<field>]
    (,<disposable-piece-losing-tag>[<field>])]
| <shaman-trance-journey-cascade>
    \alg{@@@H}
| <starchild-trance-journey-cascade>
    \alg{@@@}[<disposable-piece-losing-tag>]
\end{alltt}

\clearpage % ..........................................................

\begin{alltt}
<pawn-sacrifice> =
  \alg{S}<stepping>\alg{~A}<stepping>
    [\alg{*}[<pawn-losing-tag>]]\alg{;;}

<pawn-sacrifice-end> = \alg{|}<field>
                     | <move-cascading>

<pawn-sacrifice-captures> =
  \alg{S}[<disambiguation>]
    \{<step>[\alg{*}[<pawn-losing-tag>]]\}
    [<pawn-sacrifice-end>]
| \alg{S}<stepping>[<pawn-sacrifice-end>]

<move-star> =
  \alg{I}<stepping>[<resurrecting-side-effect>]
    \alg{~}\alg{T}<stepping-no-side-effects>

<move-cascading> =
  <cascading>
| [<cascading-start>]<teleportation>
| [<cascading-start>]<trance-journey>
| [<cascading-start>]<pawn-sacrifice>
    [<pawn-sacrifice-captures>]
| [<cascading-start>]<move-star>

<move-wave-cascading> =
  <wave-cascade>
| [<wave-cascading-start>]<teleportation>
| [<wave-cascading-start>]<trance-journey>
| [<wave-cascading-start>]<pawn-sacrifice>
    [<pawn-sacrifice-captures>]
| [<wave-cascading-start>]<move-star>
\end{alltt}

\clearpage % ..........................................................

\begin{alltt}
<move-new> =
  <cascade>
| [<cascade-start>\alg{~}]<teleportation>
| [<cascade-start>\alg{~}]<trance-journey>
| [<cascade-start>\alg{~}]<pawn-sacrifice>
    [<pawn-sacrifice-captures>]
| [<cascade-start>\alg{~}]<move-star>

<status> = ?
         | [\alg{+}]
         | [\alg{+}]\alg{(=)}
         | [\alg{+}]\alg{(-)}
         | \alg{#}
         | \algcty{++}
         | \alg{(=)}
         | \alg{(-)}

<compatibility-capture> =
  <classic-piece>[<disambiguation>][\algcty{x}]
    <field>[<status>]
| <pawn>[<disambiguation>][\algcty{x}]<field>
    <promoting-side-effect>[<status>]
| <file>[\algcty{x}]<field>[<status>][\algcty{\_e.p.}]

<compatibility-castling> =
  \algcty{O-O-O}
| \algcty{0-0-0}
| \algcty{O-O}
| \algcty{0-0}

<move-monolith> =
  \alg{M}<stepping-no-side-effects>
  [<demoting-side-effect>]
\end{alltt}

\clearpage % ..........................................................

\begin{alltt}
<move> =
  <move-new><status>
| <move-monolith><status>
| <king-castling-move><status>
| <pawn-promoting-move><status>
| <compatibility-capture>
| <compatibility-castling>
| \alg{#}
| \alg{##}
| \alg{(==)}
| \alg{(===)}
\end{alltt}

% \clearpage % ..........................................................

Notational grammar isn't exact, some things are difficult to formalize, some are
too cumbersome. For instance, any ply in trance-journey, teleportation and
elsewhere can be gathered in \alg{[ ]} (square brackets), just like ordinary ply.
Another example, the two notations for capturing after Pawn-sacrifice somewhat
overlaps, if there was no Pawn captured. Also, compatibility notation for capture
and castling is valid only for Classical Chess, and nowhere else. Additionaly,
algebraic notation does not distinguish between light and dark pieces, so some
of the rules are not possible to formalize at all.

\clearpage % ..........................................................
% ---------------------------------------------------- Appendix chapter
