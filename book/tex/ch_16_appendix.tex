
% Copyright (c) 2015 - 2020 Mario Mlaƒçak, mmlacak@gmail.com
% Licensed and published as Public Domain work.

% Appendix chapter ----------------------------------------------------
\chapter*{Appendix}
\addcontentsline{toc}{chapter}{Appendix}
\label{ch:Appendix}

Appendix contains description of algebraic notation, extended from the base described here: \\
\href{https://en.wikipedia.org/wiki/Algebraic\_notation\_(chess)}{https://en.wikipedia.org/wiki/Algebraic\_notation\_(chess)}. \\
This description mostly covers short notation, and is written in monospace font, e.g. \alg{Nc3}.

Parts of classic notation clashes with new developments, and so had to be covered with
exceptions made specificaly for Classical Chess, so that algebraic notation retains
compatibility with its classic form. These exceptions are written in monospace italics,
e.g. \algcty{Nxb3}.

For instance, \algcty{0-0}, \algcty{O-O} and their Queen's side siblings for castling had
to go in extended algebraic notation, since there are multiple castling choices available.
Another example, \algcty{x} as annotation for a capturing move, e.g. \algcty{Nxv3}, since
this might also be interpreted as disambiguation.

\clearpage % ..........................................................

\section*{Abbreviations}
\addcontentsline{toc}{section}{Abbreviations}
\label{sec:Appendix/Abbreviations}

\begin{table}[!h]
\centering
\begin{tabular}{ rlll }
\toprule
\textbf{Id} & \textbf{Symbol}      & \textbf{Description}                       \\
\midrule
1           & \algfmt{AN}          & algebraic notation, in general             \\ \cmidrule{1-3}
2           & \algfmt{CAN}         & classic \algfmt{AN}, as described by FIDE  \\
            &                      & handbook and Wikipedia, can be             \\
            &                      & long, short or minimal                     \\
3           & \algfmt{LAN}         & classic \algfmt{AN}, long form             \\
4           & \algfmt{SAN}         & classic \algfmt{AN}, short form            \\
5           & \algfmt{MAN}         & classic \algfmt{AN}, minimal form          \\ \cmidrule{1-3}
6           & \algfmt{NAN}         & new, extended \algfmt{AN},                 \\
            &                      & can be long or short                       \\
6           & \algfmt{EAN}         & new, extended \algfmt{AN}, short form      \\
7           & \algfmt{XAN}         & new, extended \algfmt{AN}, long form       \\ \cmidrule{1-3}
8           & \algfmt{FIDE}        & FIDE handbook                              \\
9           & \algfmt{FIDE point}  & point in FIDE handbook                     \\
\bottomrule
\end{tabular}
\caption{Ply side-effects}
\label{tbl:Appendix/Ply side-effects}
\end{table}

For official reference FIDE handbook is used, current date of publication is 2018-01-01: \\
\href{https://handbook.fide.com/chapter/E012018}{https://handbook.fide.com/chapter/E012018}.

Here, \algfmt{CAN} is used to indicate compatibility with Classical Chess notation, even if
examples are written on chessboards for other variants. \algfmt{CAN} almost always means
short notation, and only occasionally long, if appropriate.

Point in FIDE handbook refers to a code under which definition can be found on above website,
e.g. \algfmt{FIDE~C.9.3}.

\clearpage % ..........................................................

\section*{Variants}
\addcontentsline{toc}{section}{Variants}
\label{sec:Appendix/Variants}

\begin{table}[!h]
\centering
\begin{tabular}{ rll }
\toprule
\textbf{Id} & \textbf{Variant} & \textbf{Contains}                  \\
\midrule
\multirow{6}{*}{1} & \multirow{6}{*}{Classical chess} & Pawn        \\
                   &                                  & Knight      \\
                   &                                  & Bishop      \\
                   &                                  & Rook        \\
                   &                                  & Queen       \\
                   &                                  & King        \\ \cmidrule{1-3}
                 2 & Croatian Ties                    & Pegasus     \\
                 3 & Mayan Ascendancy                 & Pyramid     \\
                 4 & Age of Aquarius                  & Unicorn     \\
                 5 & Miranda's Veil                   & Wave        \\
                 6 & Nineteen                         & Star        \\
                 7 & Hemera's Dawn                    & Centaur     \\
                 8 & Tamoanchan Revisited             & Serpent     \\
                 9 & Conquest of Tlalocan             & Shaman      \\
                10 & Discovery                        & Monolith    \\
                11 & One                              & Starchild   \\
\bottomrule
\end{tabular}
\caption{Variants}
\label{tbl:Appendix/Variants}
\end{table}

Each new variant contains all previously introduced pieces. For instance, Age of Aquarius
beside Unicorn also contains Pyramid and Pegasus, on top of all classical pieces.

\clearpage % ..........................................................

\section*{Chessboards}
\addcontentsline{toc}{section}{Chessboards}
\label{sec:Appendix/Chessboards}

\begin{table}[!h]
\centering
\begin{tabular}{ rlrrcrr }
\toprule
\textbf{Id} & \textbf{Variant}      & \multicolumn{2}{c}{ \textbf{Ranks} } & ~ & \multicolumn{2}{c}{ \textbf{Files} }   \\ \cmidrule{3-4} \cmidrule{6-7}
            &                       & \emph{min} & \emph{max}              &   & \emph{min} & \emph{max}                \\
\midrule
          1 & Classical chess       & 1          &  8                      &   & a          & h                         \\ % \cmidrule{1-6}
          2 & Croatian Ties         & 1          & 10                      &   & a          & j                         \\
          3 & Mayan Ascendancy      & 1          & 12                      &   & a          & l                         \\
          4 & Age of Aquarius       & 1          & 14                      &   & a          & n                         \\
          5 & Miranda's Veil        & 1          & 16                      &   & a          & p                         \\
          6 & Nineteen              & 1          & 18                      &   & a          & r                         \\
          7 & Hemera's Dawn         & 1          & 20                      &   & a          & t                         \\
          8 & Tamoanchan Revisited  & 1          & 22                      &   & a          & v                         \\
          9 & Conquest of Tlalocan  & 1          & 24                      &   & a          & x                         \\
         10 & Discovery             & 1          & 24                      &   & a          & x                         \\
         11 & One                   & 1          & 26                      &   & a          & z                         \\
\bottomrule
\end{tabular}
\caption{Chessboards}
\label{tbl:Appendix/Chessboards}
\end{table}

Positions on a chessboard are written the same as in base algebraic notation, column + row,
e.g. \alg{m2} is initial position of light Pawn in Nineteen variant.

\clearpage % ..........................................................

\section*{Pieces}
\addcontentsline{toc}{section}{Pieces}
\label{sec:Appendix/Pieces}

\begin{table}[!h]
\centering
\begin{tabular}{ rlll }
\toprule
\textbf{Id} & \textbf{Piece} & \textbf{Symbol} & \textbf{Introduced in}           \\
\midrule
1           & Pawn           & P               & \multirow{6}{*}{Classical chess} \\
2           & Knight         & N               &                                  \\
3           & Bishop         & B               &                                  \\
4           & Rook           & R               &                                  \\
5           & Queen          & Q               &                                  \\
6           & King           & K               &                                  \\ \cmidrule{1-4}
7           & Pegasus        & G               & Croatian Ties                    \\
8           & Pyramid        & A               & Mayan Ascendancy                 \\
9           & Unicorn        & U               & Age of Aquarius                  \\
10          & Wave           & W               & Miranda's Veil                   \\
11          & Star           & T               & Nineteen                         \\
12          & Centaur        & C               & Hemera's Dawn                    \\
13          & Serpent        & S               & Tamoanchan Revisited             \\
14          & Shaman         & H               & Conquest of Tlalocan             \\
15          & Monolith       & M               & Discovery                        \\
16          & Starchild      & I               & One                              \\
\bottomrule
\end{tabular}
\caption{Pieces}
\label{tbl:Appendix/Pieces}
\end{table}

Each piece is present in variant in which it is introduced, and all subsequent ones.
For example, Shaman is introduced in Conquest of Tlalocan variant, so it's also present
in succeeding variants, Discovery and One.

\clearpage % ..........................................................

\section*{Movement}
\addcontentsline{toc}{section}{Movement}
\label{sec:Appendix/Movement}

Simple movement is denoted the same way as in \algfmt{CAN}, piece (always written as upper case) +
destination field, which consists of rank (always written in lower case) + file (a number).

In this example of \hyperref[fig:scn_ct_03_define_step_ply]{Pegasus moving to destination field 3},
movement of the piece would be written as \alg{Gf7}. The same movement in \algfmt{XAN}, would be
written as \alg{Gc2-f7}.

When moving Pawn, symbol is omitted, so only destination field is written. In this example of
\hyperref[fig:04_croatian_ties_en_passant]{Pawn rushing to field 2}, movement can be written as
\alg{h5}. Long notation would be \alg{h2-h5}.

\subsection*{Disambiguation}
\addcontentsline{toc}{subsection}{Disambiguation}
\label{sec:Appendix/Disambiguation}

Disambiguation is done in the same way as described for \algfmt{CAN}:
\href{https://en.wikipedia.org/wiki/Algebraic\_notation\_(chess)\#Disambiguating\_moves}{https://en.wikipedia.org/wiki/Algebraic\_notation\_(chess)\\
\#Disambiguating\_moves},
only difference is that disambiguation really affects plies (movement of a single piece),
and not move as a whole, as multiple pieces might get moved in a single, cascading move.

For instance, should \hyperref[fig:scn_ct_03_define_step_ply]{Pegasus simple move example}
had another light Pegasus at \alg{i2} field, move to destination field 3 would be written
as \alg{Gcf8}.

\subsection*{Capturing}
\addcontentsline{toc}{subsection}{Capturing}
\label{sec:Appendix/Capturing}

Capturing move is denoted with \alg{*} (asterisk) at the end, usually followed by the captured
piece. Only for Classical Chess capturing is denoted with \algcty{x}, before destination field.
Here, \hyperref[fig:scn_ct_04_pegasus_movement]{Pegasus could capture opponent's Pawn}, which
would be written as \alg{Gg4*P}, or just \alg{Gg4*}, if captured piece is not needed.

In \algfmt{CAN}, the same move would be written as \algcty{Gxg4}. Note, FIDE handbook requires
captures made by Pawn to contain starting file, \algcty{x}, and then destination field; see
\algfmt{FIDE~C.9.3}.
If \hyperref[fig:scn_mv_22_wave_activation_by_capture_pawn]{Wave activated by Pawn example} had
dark Wave instead of light one, light Pawn would be able to capture it, which in \algfmt{CAN}
would be written as \algcty{fxe8}. The same move in new notation is written as \alg{e8*}, and
if captured piece is also written \alg{e8*W}.

\subsection*{En passant}
\addcontentsline{toc}{subsection}{En passant}
\label{sec:Appendix/En passant}

En passant is denoted with \alg{:} (colon), after destination field. In this
\hyperref[fig:04_croatian_ties_en_passant]{en passant example} dark Pawn on the right might capture
light Pawn if rushed, which is written as \alg{h3:}. Rank of captured Pawn can be written after
\alg{:}, so our example might now be \alg{h3:5}, if captured Pawn has been rushed to field 2.

If disambiguation is needed, it is written as previously described. Usually, it's enough to add
starting file before destination field. If previous example had additional dark Pawn located at
\alg{g4}, en passant would be written as \alg{ih3:}, or \alg{ih3:5}.

In \algfmt{CAN}, both en passant and its disambiguation form are written as \algcty{ixh3 e.p}, where
\algcty{e.p.} stands for en passant; see \algfmt{FIDE~C.9.3}.

\subsection*{Castling}
\addcontentsline{toc}{subsection}{Castling}
\label{sec:Appendix/Castlingn}

Castling is noted with \alg{\&} (ampersand), after King's symbol and destination file. This
\hyperref[fig:age_of_aquarius_castling_left_04]{castling example} would be written as \alg{Kd\&},
and this \hyperref[fig:one_castling_right_04]{castling example} as \alg{Kr\&}. Rank at which
castling Rook ended can be written after \alg{\&}, the same examples would now be written as
\alg{Kd\&e} and \alg{Kr\&q}.

Only for Classical Chess \algcty{0-0} and \algcty{O-O} for King's side, \algcty{0-0-0} and
\algcty{O-O-O} for Queen's side are accepted as castling notation.

\subsection*{Pawn promotion}
\addcontentsline{toc}{subsection}{Pawn promotion}
\label{sec:Appendix/Pawn promotion}

Pawn promotion is also written the same way as in \algfmt{CAN}, as described in detail: \\
\href{https://en.wikipedia.org/wiki/Algebraic\_notation\_(chess)\#Pawn\_promotion}{https://en.wikipedia.org/wiki/Algebraic\_notation\_(chess)\\
\#Pawn\_promotion}, with Pawn's destination field + piece to which it was promoted to,
like so: \alg{e8Q}. Inserting \alg{=} (equal sign) between field and promoted-to piece
is also supported, e.g. \alg{e8=Q}.

If \hyperref[fig:scn_aoa_05_delayed_promo_pawn_2_moved]{promotion is being delayed}, usage of
\alg{=} is mandatory, as there is no immediate piece to promote to, e.g. \alg{l14=}.
If \hyperref[fig:scn_aoa_04_delayed_promo_pawn_2_tagged]{Pawn tagged for promotion} moves
before actual promotion, it losses its tag, which is denoted with \alg{==} (double equal
sign), like so: \alg{e12==}.

\subsection*{Ply}
\addcontentsline{toc}{subsection}{Ply}
\label{sec:Appendix/Ply}

\hyperref[sec:Terms/Ply]{Ply} is a movement of a single piece in a cascading move. Two plies
are separated by \~{} (tilde). In the example starting with
\hyperref[fig:scn_ma_11_cascading_init]{Queen activating a Pyramid}, which then activates another
Pyramid; example is comprised of series of 4 images, each corresponding to one ply, while last
image depicts ending state. This can be written as \alg{Qf7\~{}Ai7\~{}Ai9}.

In \algfmt{XAN}, the same would be written as \\
\alg{Qk2-f7\~{}Af7-i7\~{}Ai7-i9}. A pair of \alg{[}, \alg{]} (square brackets) can be used to
gather each ply, like so: \\
\alg{[Qk2-f7]\~{}[Af7-i7]\~{}[Ai7-i9]}.

\subsection*{Conversion}
\addcontentsline{toc}{subsection}{Conversion}
\label{sec:Appendix/Conversion}

Conversion is noted with \alg{\%} (percentage) after destination field. Example starting with
\hyperref[fig:scn_ma_08_conversion_init]{Bishop activating Pyramid}, which then converts opponent's
Rook is covered by 3 images, 2 corresponding to 2 plies, and last one is for ending state. This
is written as \alg{Bd5\~{}Ah5\%}. Optionally, converted piece can be written after \alg{\%} symbol,
so it would be \alg{Bd5\~{}Ah5\%R}.

In \algfmt{XAN}, it would be \alg{Bh9-d5\~{}Ad5-h5\%}. With both plies gathered and converted piece
noted it would be \alg{[Bh9-d5]\~{}[Ad5-h5\%R]}.

Starchild is immune to conversion, Pyramid attempting such a thing is
\hyperref[sec:Terms/Oblation]{oblationed}. Failed conversion is noted with \alg{\%\%} (double percentage)
after destination field. This example of
\hyperref[fig:scn_o_12_starchild_conversion_immunity_init]{conversion immunity} would be written as
\alg{Bl23\~{}Ah23\%\%}. In \algfmt{XAN}, with ply gathering, it would be
\alg{[Bs16-l23]\~{}[Al23-h23\%\%]}.

\subsection*{Complex movement}
\addcontentsline{toc}{subsection}{Complex movement}
\label{sec:Appendix/Complex movement}

Individual steps are separated by \alg{.} (single dot), multiple steps are separated by \alg{..} (two dots).
In this example, \hyperref[fig:scn_hd_03_centaur_multi_step]{Centaur has to choose 2 different steps},
which it will then follow for the rest of ply. Lets say that destination field is 8, writing it as
just \alg{Cp14} is not enough since at least 2 different paths lead to the same destination field.

The best way to write it is with both initial steps, i.e. \alg{C.c5.g6..p15}, even if it's a bit verbose.
It would be enough if only first step is written, i.e. \alg{C.c5..p15}. The one of other paths leading
to the same \alg{Cp15} would be \alg{C.f2.g6..p15}. Note also \alg{.} separating piece and the first
step, without it first step would be taken as an initial field.

Not recomended, but still possible is to write \emph{some} step along the way, e.g. \alg{C..i11..p15}.
Care must be taken to write step which really differentiate paths, otherwise \alg{C..j9..p15} might also
denote \alg{C.b4.f5..p15}, which happens to cross \alg{j9} as well.

\subsection*{Trance-journey}
\addcontentsline{toc}{subsection}{Trance-journey}
\label{sec:Appendix/Trance-journey}

Trance-journey is noted with \alg{@} (at sign), instead of normal ply separator \alg{\~{}} (tilde),
before entranced piece takes off. This
\hyperref[fig:scn_cot_18_light_light_shaman_interaction_start]{trance-journey example}, if without any
interactions with pieces on entranced Shaman's step-fields, would be written as \alg{Hd11\~{}We13@Hg24}.
In \algfmt{XAN}, it would be \alg{[Hf10-d11]\~{}[Wd11-e13]@[He13-g24]}.

Displacements are noted by writing \alg{<} immediately after step in which a piece is reached, followed
by, optionally a reached piece, and mandatory by field of displacement. The same
\hyperref[fig:scn_cot_19_light_light_shaman_interaction_end]{trance-journey example with interactions}
would be written as \alg{Hd11\~{}We13@H..e18<i14..m12<j17..g24}. In \algfmt{XAN}, with gathered plies and
displaced pieces it would be % \alg{[Hf10-d11]\~{}[Wd11-e13]@[He13..e18<Ni14..m12<Pj17..g24]}.
\alg{[Hf10-d11]\~{}[Wd11-e13]@}\\
\alg{[He13..e18<Ni14..m12<Pj17..g24]}.

Captures are noted by writing \alg{*} immediately after step in which a piece is reached, optionally
followed by a captured piece. This
\hyperref[fig:scn_cot_21_dark_light_shaman_interaction_end]{trance-journey example with captures} would be
written as \alg{Hf12\~{}Wd9\~{}We13@H..e18*..m12*..g24}. In \algfmt{XAN}, with gathered plies and
captured pieces it would be % \alg{[H-f12]\~{}[Wf12-d9]\~{}[Wd9-e13]@[He13..e18*N..m12*P..g24]}.
\alg{[H-f12]\~{}[Wf12-d9]\~{}[Wd9-e13]@}\\
\alg{[He13..e18*N..m12*P..g24]}.

\clearpage % ..........................................................

\subsection*{Ply side-effects}
\addcontentsline{toc}{subsection}{Ply side-effects}
\label{sec:Appendix/Ply side-effects}

\begin{table}[!h]
\centering
\begin{tabular}{ rlll }
\toprule
\textbf{Id} & \textbf{Symbol}      & \textbf{Side-effect}           \\
\midrule
1           & \alg{*}              & capturing                      \\
2           & \alg{:}              & en passant                     \\
3           & \alg{\&}             & castling                       \\
4           & \alg{=}              & promotion, tag                 \\
5           & \alg{==}             & failed promotion               \\
6           & \alg{\%}             & conversion                     \\
7           & \alg{\%\%}           & failed conversion, oblation    \\
8           & \alg{<}              & trance-journey displacement    \\
9           & \alg{>}              & syzygy, demoting to Pawn       \\
10          & \alg{\$}             & syzygy, ressurection           \\
\bottomrule
\end{tabular}
\caption{Ply side-effects}
\label{tbl:Appendix/Ply side-effects}
\end{table}

. . .

\clearpage % ..........................................................

\clearpage % ..........................................................

\subsection*{Path separators}
\addcontentsline{toc}{subsection}{Path separators}
\label{sec:Appendix/Path separators}

\begin{table}[!h]
\centering
\begin{tabular}{ rlll }
\toprule
\textbf{Id} & \textbf{Symbol}      & \textbf{Separates}             \\
\midrule
1           & \alg{.}              & single step                    \\
2           & \alg{..}             & multiple steps                 \\
3           & \alg{-}              & starting and destination field \\
4           & \alg{\~{}}           & plies                          \\
5           & \alg{|}              & teleportation                  \\
6           & \alg{||}             & failed teleportation, oblation \\
7           & \alg{@}              & trance-journey                 \\
8           & \alg{::}             & Pawn-sacrifice                 \\
\bottomrule
\end{tabular}
\caption{Path separators}
\label{tbl:Appendix/Path separators}
\end{table}

. . .

\clearpage % ..........................................................

\subsection*{Move status}
\addcontentsline{toc}{subsection}{Move status}
\label{sec:Appendix/Move status}

\begin{table}[!h]
\centering
\begin{tabular}{ rlll }
\toprule
\textbf{Id} & \textbf{Symbol}      & \textbf{Status}                \\
\midrule
1           & \alg{+}              & check                          \\
2           & \alg{++}             & double-check                   \\
3           & \alg{\#}             & checkmate                      \\
\bottomrule
\end{tabular}
\caption{Move status}
\label{tbl:Appendix/Move status}
\end{table}

. . .

\clearpage % ..........................................................

\huge{TODO}
Serpent, Monolith movement limits --\textgreater table
\normalsize{}

\clearpage % ..........................................................

\section*{Movement of Wave}
\addcontentsline{toc}{section}{Movement of Wave}
\label{sec:Appendix/Movement of Wave}

Movement of Wave ... as multi-step piece activating it  ...

% TODO :: table <activated-by> : <moves-like>

\clearpage % ..........................................................

\section*{Initial setups}
\addcontentsline{toc}{section}{Initial setups}
\label{sec:Appendix/Initial setups}
Initial setups ...

% Initial setup for Light player is (mirrored for Dark one):
% \texttt{PPPPPPPPPP \\
%         RGNBQKBNGR}, \\
% or more conveniently, as seen in this image:

% Initial setup for Light player is (mirrored for Dark one):
% \texttt{PPPPPPPPPPPP \\
%         RGANBQKBNAGR}, \\
% or more conveniently, as seen in this image:

% Initial setup for Light player is (mirrored for Dark one):
% \texttt{PPPPPPPPPPPPPP \\
%         RGAUNBQKBNUAGR}, \\
% or more conveniently, as seen in this image:

% Initial setup for Light player is (mirrored for Dark one):
% \texttt{PPPPPPPPPPPPPPPP \\
%         RGAUWNBQKBNWUAGR}, \\
% or more conveniently, as seen in this image:

% Initial setup for Light player is (mirrored for Dark one):
% \texttt{PPPPPPPPPPPPPPPPPP \\
%         TRGAUWNBQKBNWUAGRT}, \\
% or more conveniently, as seen in this image:

% Initial setup for Light player is (mirrored for Dark one):
% \texttt{PPPPPPPPPPPPPPPPPPPP \\
%         TRGAUWCNBQKBNCWUAGRT}, \\
% or more conveniently, as seen in this image:

% Initial setup for Light player is (mirrored for Dark one):
% \texttt{PPPPPPPPPPPPPPPPPPPPPP \\
%         TRGAUWCSNBQKBNSCWUAGRT}, \\
% or more conveniently, as seen in this image:

% Initial setup for Light player is (mirrored for Dark one):
% \texttt{PPPPPPPPPPPPPPPPPPPPPPPP \\
%         TRGAHUWCSNBQKBNSCWUHAGRT}, \\
% or more conveniently, as seen in this image:

% Initial setup for Light player is (mirrored for Dark one):
% \texttt{PPPPPPPPPPPPPPPPPPPPPPPP \\
%         TRGAHUWCSNBQKBNSCWUHAGRT}, \\
% or more conveniently, as seen in this image:

% Initial setup for Light player is (mirrored for Dark one):
% \texttt{PPPPPPPPPPPPPPPPPPPPPPPPPP \\
%         TRGAHIUWCSNBQKBNSCWUIHAGRT}, \\
% or more conveniently, as seen in this image:

% TODO :: add to "Pieces" section
%
% \section*{Passive pieces}
% \addcontentsline{toc}{section}{Passive pieces}
% \label{sec:Definitions/Passive pieces}
%
% Passive pieces are ...
%
% Activating passive piece with Pawn ... capture-fields vs. step-fields.

\clearpage % ..........................................................
% ---------------------------------------------------- Appendix chapter
