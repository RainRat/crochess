
% Miranda's veil chapter ----------------------------------------------
\chapter*{Miranda's veil}
\addcontentsline{toc}{chapter}{Miranda's veil}

\begin{flushright}
\parbox{0.8\textwidth}{
\emph{Under all that we think, lives all we believe, like the ultimate veil of our spirits. \\
\hspace*{\fill}{\textperiodcentered \textperiodcentered \textperiodcentered \hspace*{0.2em} Antonio Machado} } }
\end{flushright}

\noindent
Miranda's veil is chess variant which is played on 16 x 16 board, with
white and dark violet fields and light magenta and indigo pieces. In
algebraic notation, columns are enumerated from 'a' to 'p', and rows
are enumerated from '1' to '16'. A new piece is introduced, Wave.

\clearpage % ..........................................................

\section*{Wave}
\addcontentsline{toc}{section}{Wave}

\noindent
\begin{wrapfigure}[12]{l}{0.4\textwidth}
\centering
\includegraphics[width=0.4\textwidth, keepaspectratio=true]{pieces/10_wave.png}
\caption{Wave}
\label{fig:10_wave}
\end{wrapfigure}
Wave is passive piece, it has to be activated before it can move. Activation
is done in the same way as with Pyramid. Own piece has to capture field at
which Wave is located before Wave can move.

Wave can be activated even if activating piece has no momentum. Wave does not
use received momentum for moving, and isn't limited by it.
Wave can move freely even if it has no momentum. Wave is not blocked by any piece,
it can continue its' movement freely as if there are no pieces on board at all.

After activation Wave moves like piece that just activated it. Additionally,
Wave can move over multiple step-fields, in the same fashion, even if
activating piece can move for only one. For details see
\hyperref[sec:Appendix/Movement of Wave]{'Movement of Wave'} in Appendix.

Wave cannot capture any piece. Consequenly, Wave cannot check opponent's
King, and hence cannot participate in a checkmate.

Wave can activate any own piece, except King, if it has momentum. Wave can
also activate other Wave, own or opponent's, even if it has no momentum. In
all cases, Wave transfers all received momentum to activated piece, which is
then limited by received momentum.

In algebraic notation symbol for Wave is 'W'.

\clearpage % ..........................................................

\subsection*{Activation}
\addcontentsline{toc}{subsection}{Activation}

\noindent
% \begin{figure}[t]
\begin{figure}[h]
\includegraphics[width=1.0\textwidth, keepaspectratio=true]{examples/10_mv/scn_mv_01_move_wave_init.png}
\caption{Wave activation}
\label{fig:scn_mv_01_move_wave_init}
% \centering
\end{figure}

Above, Knight is about to activate Wave. After activation, Wave could
continue movement the same way Knight moves over multiple step-fields,
thus moving as if activated by Pegasus. Wave does not spend received
momentum while moving, and would transfer it entirely to any piece it
activates.

\clearpage % ..........................................................

\noindent
% \begin{figure}[t]
\begin{figure}[h]
\includegraphics[width=1.0\textwidth, keepaspectratio=true]{examples/10_mv/scn_mv_02_move_wave_activated.png}
\caption{Wave activated}
\label{fig:scn_mv_02_move_wave_activated}
% \centering
\end{figure}

Once activated, Wave can move unhindered by surrounding pieces (green arrows),
even if they occupy step-fields between starting and destination field. Wave
can also activate pieces (blue arrows) obscured by others, for instance light
Pyramid which would otherwise be out of reach for regular piece, e.g. Pegasus.
Note, Wave cannot activate Kings nor opponent's pieces (red arrows), except
dark Wave.

\clearpage % ..........................................................

\noindent
% \begin{figure}[t]
\begin{figure}[h]
\includegraphics[width=1.0\textwidth, keepaspectratio=true]{examples/10_mv/scn_mv_03_move_wave_finished.png}
\caption{Wave finished}
\label{fig:scn_mv_03_move_wave_finished}
% \centering
\end{figure}

Activated Bishop now continues the move according to own rules of movement,
i.e. diagonally. Note that it's restricted by momentum received, and thus
can move for only one field.

\clearpage % ..........................................................

\subsection*{Cascading Waves}
\addcontentsline{toc}{subsection}{Cascading Waves}

\noindent
\begin{wrapfigure}[13]{l}{0.5625\textwidth}
\centering
\includegraphics[width=0.5625\textwidth, keepaspectratio=true]{examples/10_mv/scn_mv_04_cascading_rook.png}
\caption{Rook starting cascade}
\label{fig:scn_mv_04_cascading_rook}
\end{wrapfigure}
Cascading Waves refers to a move in which two or more Waves have been displaced.
For example, Wave can activate another Wave. Wave can also activate active
piece (or Pyramid), which can then activate another Wave.

On the left, Rook is about to activate Wave 1, giving it momentum of 4.

\vspace*{0.05\textheight}
\noindent
\begin{wrapfigure}[12]{r}{0.5625\textwidth}
\centering
\includegraphics[width=0.5625\textwidth, keepaspectratio=true]{examples/10_mv/scn_mv_05_cascading_wave_1.png}
\caption{Wave 1 cascading}
\label{fig:scn_mv_05_cascading_wave_1}
\end{wrapfigure}
Activated Wave 1 inherits rules of movement from activating piece, and so now
moves as Rook would. It's not obstructed with any piece in its' way, nor it's
limited by received momentum, i.e. it can move further than just 4 fields away.
Wave 1 can also activate Wave 2.

\clearpage % ..........................................................

\noindent
\begin{wrapfigure}[13]{l}{0.5625\textwidth}
\centering
\includegraphics[width=0.5625\textwidth, keepaspectratio=true]{examples/10_mv/scn_mv_06_cascading_wave_2.png}
\caption{Wave 2 cascading}
\label{fig:scn_mv_06_cascading_wave_2}
\end{wrapfigure}
Activated Wave 2 inherits rules of movement from activating piece (in this
case Wave 1), and so moves too as Rook would. Wave 2 also received momentum
of 4. Again, it's not obstructed by any piece, nor it's limited by received
momentum. Wave 2 can also activate either Queen or Rook.

\vspace*{0.075\textheight}
\noindent
\begin{wrapfigure}[9]{r}{0.5625\textwidth}
\centering
\includegraphics[width=0.5625\textwidth, keepaspectratio=true]{examples/10_mv/scn_mv_07_cascading_rook_2nd_time.png}
\caption{Rook, 2nd cascading}
\label{fig:scn_mv_07_cascading_rook_2nd_time}
\end{wrapfigure}
Rook is now activated, but it is limited by momentum received, i.e. it can
move at most 4 fields away. Naturaly, Rook is obstructed by surrounding pieces,
i.e. it can't move past Wave 1. Rook can activate Wave 1.

\clearpage % ..........................................................

\noindent
\begin{wrapfigure}[10]{l}{0.5625\textwidth}
\centering
\includegraphics[width=0.5625\textwidth, keepaspectratio=true]{examples/10_mv/scn_mv_08_cascading_wave_1_2nd_time.png}
\caption{Wave 1, 2nd cascading}
\label{fig:scn_mv_08_cascading_wave_1_2nd_time}
\end{wrapfigure}
Activated Wave 1 received momentum of 2 and rules of movement from Rook. Again,
Wave 1 is not obstructed by any piece, nor it is limited by received momentum.
Wave 1 can also activate either Queen or Wave 2.

\vspace*{0.155\textheight}
\noindent
\begin{wrapfigure}[10]{r}{0.5625\textwidth}
\centering
\includegraphics[width=0.5625\textwidth, keepaspectratio=true]{examples/10_mv/scn_mv_09_cascading_queen.png}
\caption{Queen cascading}
\label{fig:scn_mv_09_cascading_queen}
\end{wrapfigure}
Activated Queen received momentum of 2, it can move at most 2 fields away.
Queen can also activate Wave 2, giving it momentum of 0.

\clearpage % ..........................................................

\noindent
\begin{wrapfigure}[7]{l}{0.5625\textwidth}
\centering
\includegraphics[width=0.5625\textwidth, keepaspectratio=true]{examples/10_mv/scn_mv_10_cascading_wave_2_2nd_time.png}
\caption{Wave 2, 2nd cascading}
\label{fig:scn_mv_10_cascading_wave_2_2nd_time}
\end{wrapfigure}
Activated Wave 2 received rules of movement from Queen, and 0 momentum.
Note, since Wave 2 has no momentum it can't activate Rook, only Wave 1.

\vspace*{0.245\textheight}
\noindent
\begin{wrapfigure}[9]{r}{0.5625\textwidth}
\centering
\includegraphics[width=0.5625\textwidth, keepaspectratio=true]{examples/10_mv/scn_mv_11_cascading_wave_1_3rd_time.png}
\caption{Wave 1, 3rd cascading}
\label{fig:scn_mv_11_cascading_wave_1_3rd_time}
\end{wrapfigure}
Activated Wave 1 inherits rules of movement from activating piece (Wave 2),
meaning Wave 1 too now moves as Queen would. Due to no momentum, Wave 1 can't
activate neither Queen nor Rook.

\clearpage % ..........................................................

\noindent
\begin{wrapfigure}[3]{l}{0.5625\textwidth}
\centering
\includegraphics[width=0.5625\textwidth, keepaspectratio=true]{examples/10_mv/scn_mv_12_cascading_end.png}
\caption{Wave 1, end cascading}
\label{fig:scn_mv_12_cascading_end}
\end{wrapfigure}
Wave 1 end this rather long cascade by settling past Rook.

\vspace*{0.345\textheight}
In cascade, Wave is not limited by received momentum, nor it's obstructed by
other pieces on board.

Wave inherts rules of movement from activating piece. All other pieces moves
according to their own rules, and are restricted by momentum received. For details
see \hyperref[sec:Appendix/Movement of Wave]{'Movement of Wave'} in Appendix.

During cascade, after each ply (movement of a piece) activation takes place
according to current positioning of pieces on the board, just as it would
at the beginning of move.

This makes it possible, in the same cascade, to activate piece which started
it all, Rook in this example.

\clearpage % ..........................................................

\subsection*{Cascading opponent}
\addcontentsline{toc}{subsection}{Cascading opponent}

\noindent
\begin{wrapfigure}[10]{l}{0.5625\textwidth}
\centering
\includegraphics[width=0.5625\textwidth, keepaspectratio=true]{examples/10_mv/scn_mv_13_casc_oppo_light_queen.png}
\caption{Light Queen starting cascade}
\label{fig:scn_mv_13_casc_oppo_light_queen}
\end{wrapfigure}
Cascading opponent refers to a move in which opponent's Wave has been displaced,
potentially other opponent's pieces.

On the left, light Queen is about to activate light Wave, giving it momentum of 3.

\vspace*{0.155\textheight}
\noindent
\begin{wrapfigure}[5]{r}{0.5625\textwidth}
\centering
\includegraphics[width=0.5625\textwidth, keepaspectratio=true]{examples/10_mv/scn_mv_14_casc_oppo_light_wave.png}
\caption{Light Wave}
\label{fig:scn_mv_14_casc_oppo_light_wave}
\end{wrapfigure}
Activated light Wave can activate dark Wave, but can't interact with dark Queen in
any meaningful way.

\clearpage % ..........................................................

\noindent
\begin{wrapfigure}[5]{l}{0.5625\textwidth}
\centering
\includegraphics[width=0.5625\textwidth, keepaspectratio=true]{examples/10_mv/scn_mv_15_casc_oppo_dark_wave.png}
\caption{Dark Wave}
\label{fig:scn_mv_15_casc_oppo_dark_wave}
\end{wrapfigure}
Activated dark Wave now can activate dark Queen, but cannot interact with light Queen
in any way.

\vspace*{0.315\textheight}
\noindent
\begin{wrapfigure}[13]{r}{0.5625\textwidth}
\centering
\includegraphics[width=0.5625\textwidth, keepaspectratio=true]{examples/10_mv/scn_mv_16_casc_oppo_dark_queen.png}
\caption{Dark Queen}
\label{fig:scn_mv_16_casc_oppo_dark_queen}
\end{wrapfigure}
Activated dark Queen is limited to momentum transferred to it, i.e. 3. Dark Queen
cannot activate light Wave. Just as it could in ordinary, non-cascading move dark
Queen can capture either light Wave or light Queen. Also, dark Queen is obstructed
by pieces present on board.

\clearpage % ..........................................................

\noindent
\begin{wrapfigure}[4]{l}{0.5625\textwidth}
\centering
\includegraphics[width=0.5625\textwidth, keepaspectratio=true]{examples/10_mv/scn_mv_17_casc_oppo_end.png}
\caption{Cascading opponent end}
\label{fig:scn_mv_17_casc_oppo_end}
\end{wrapfigure}
This example of cascading opponent ends with dark Queen capturing light Queen.

\vspace*{0.355\textheight}
In summary, during cascade opponent's pieces retain all of their normal behavior,
most notably capturing their opponent's (in cascade, that means your own!) pieces.

This behavior retention include checking and checkmating their opponent's (again,
your own) King, en passant, promotion of their own pieces (if their Pyramid has
been activated), etc. This list includes all other movements, features described
later in this book.

Plies which cannot be performed by opponent's pieces during cascade are those
involving opponent's King, including castling, as that would require activation
of opponent's King, which is not allowed.

\clearpage % ..........................................................

\subsection*{Activating Pawn}
\addcontentsline{toc}{subsection}{Activating Pawn}

\noindent
\begin{wrapfigure}[10]{l}{0.5\textwidth}
\centering
\includegraphics[width=0.3125\textwidth, keepaspectratio=true]{examples/10_mv/scn_mv_18_activating_rush_pawn_init.png}
\caption{Activating Pawn}
\label{fig:scn_mv_18_activating_rush_pawn_init}
\end{wrapfigure}
Activating Pawn in its' initial position gives it ability to capture opponent's
piece, or rush, i.e. perform longer initial movement. If rushed, that would open
opportunity for opponent to do en passant move.

Here, Pawn is activated with momentum of 4.

\vspace*{0.10\textheight}
\noindent
\begin{wrapfigure}{l}{0.5\textwidth}
\centering
\includegraphics[width=0.3125\textwidth, keepaspectratio=true]{examples/10_mv/scn_mv_19_activating_rush_pawn_end.png}
\caption{Pawn activated}
\label{fig:scn_mv_19_activating_rush_pawn_end}
\end{wrapfigure}
Note, Pawn can rush for only as many fields as momentum received. In this case
that is no more then 4 fields, the furthest 2 fields are out of reach for Pawn.

\clearpage % ..........................................................

\subsection*{Activation by Pawn}
\addcontentsline{toc}{subsection}{Activation by Pawn}

\noindent
\begin{figure}[!h]
% \begin{figure}[!t]
\includegraphics[width=1.0\textwidth, keepaspectratio=true]{examples/10_mv/scn_mv_20_wave_activation_by_pawn.png}
\caption{Wave activation by Pawns}
\label{fig:scn_mv_20_wave_activation_by_pawn}
% \centering
\end{figure}

Pawns can activate Waves on own capture-field giving it 1 momentum (Pawn 1).
Pawns can also activate Waves on step-fields, giving it count of traveled-to
step-fields as momentum. For Pawn 2 that would be 1 momentum, while for Pawn 3
that would be 3.

\clearpage % ..........................................................
% Promotion ***********************************************************

\section*{Promotion}
\addcontentsline{toc}{section}{Promotion}

...

\textbf{\huge{TODO :: Promotion !!!}} % TODO :: FIX ME !!!

\clearpage % ..........................................................

\subsection*{Activating tagged Pawn}
\addcontentsline{toc}{subsection}{Activating tagged Pawn}

Activating own Pawns tagged for promotion ...

Activating opponent's Pawns tagged for promotion ...

% *********************************************************** Promotion
\clearpage % ..........................................................

\section*{En passant}
\addcontentsline{toc}{section}{En passant}

\noindent
\begin{wrapfigure}{l}{0.4\textwidth}
\centering
\includegraphics[width=0.1875\textwidth, keepaspectratio=true]{en_passants/10_miranda_s_veil_en_passant.png}
\caption{En passant}
\label{fig:10_miranda_s_veil_en_passant}
\end{wrapfigure}
Rush and en passant are identical to those in Classic Chess, only difference
is that Pawn can now move longer on initial turn, up to 6 fields in this
variant.

\clearpage % ..........................................................

\section*{Castling}
\addcontentsline{toc}{section}{Castling}

Castling is essentially the same as it is in Classical Chess, only real difference is that
King can move anywhere between 2 and 6 fields across. All other constraints from Classical Chess
still applies.

\noindent
\begin{figure}[!h]
% \begin{figure}[!t]
\includegraphics[width=1.0\textwidth, keepaspectratio=true]{castlings/10_mv/miranda_s_veil_castling.png}
\caption{Castling}
\label{fig:miranda_s_veil_castling}
% \centering
\end{figure}

In example above, all valid King's castling moves are numbered. Regardless if King performs
long or short castling move, Rook would always end up on the opposite side of King on the
field immediately next to it, i.e. closer to center.

\noindent
\begin{figure}[!h]
% \begin{figure}[!t]
\includegraphics[width=1.0\textwidth, keepaspectratio=true]{castlings/10_mv/miranda_s_veil_castling_right_05.png}
\caption{Castling long left}
\label{fig:miranda_s_veil_castling_right_05}
% \centering
\end{figure}

In this example King was castling long to the right. Initial King's position is marked with "K".
After castling is finished, right Rook ends up at field immediately on the left to the King.

\clearpage % ..........................................................

\section*{Initial setup}
\addcontentsline{toc}{section}{Initial setup}

Compared to initial setup of Age of Aquarius, Wave is inserted between Knight and Unicorn
symmetrically, on both sides of chessboard. This can be seen in the image below:

\noindent
% \begin{figure}[t]
\begin{figure}[h]
\includegraphics[width=1.0\textwidth, keepaspectratio=true]{boards/10_miranda_s_veil.png}
\caption{Miranda's veil board}
\label{fig:10_miranda_s_veil}
% \centering
\end{figure}

\clearpage % ..........................................................
% ---------------------------------------------- Miranda's veil chapter
